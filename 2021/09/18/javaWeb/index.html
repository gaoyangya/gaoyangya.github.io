<!DOCTYPE html>
<html>
  <!-- meta/link... -->
  



<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <!-- Global site tag (gtag.js) - Google Analytics -->


  <title>JavaWeb | gy的小站</title>

  <link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="/favicon.ico">
  <link rel="stylesheet" href="https://at.alicdn.com/t/font_1911880_c1nvbyezg17.css">
  <link href="https://cdn.jsdelivr.net/gh/inkss/fontawesome@5.15.3/css/all.min.css" rel="stylesheet">
  <link href="/js/swiper/swiper@5.4.1.min.css" rel="stylesheet">
  
  
    <script>
        var themeModelId = '';
        if (themeModelId) {
            localStorage.setItem('modelId', themeModelId);
        }
    </script>
    
    <script src="https://cdn.jsdelivr.net/gh/yuang01/live2d-widget@latest/autoload.js"></script>
    <script>
        var live2dOpen = eval('true') || false;
        if (!live2dOpen) {
            localStorage.setItem('waifu-display', 1609323474481);
        }
    </script>
  
  
  
<link rel="stylesheet" href="/css/animate.min.css">

  
<link rel="stylesheet" href="/css/style.css">

  
  
    
<link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/js/shareJs/share.min.css">

  
  <style>
        @media (max-width: 992px) {
            #waifu {
                display: none;
            }
        }
    </style>
    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">

    

    <!-- import link -->
    
        
            
        
            
        
    
    <!-- import script -->
    
        
            
        
            
        
    

<meta name="generator" content="Hexo 5.4.2"></head>

  
  <!-- 依赖于jquery和vue -->
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

  

  
    
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.min.js"></script>

  
  
  <body>
    <!-- 预加载动画 -->
    <!-- 页面预加载动画 -->

<div id='loader'>
  <link rel="stylesheet" href="/js/loaded/index.css" >
  <div class="loading-left-bg"></div>
  <div class="loading-right-bg"></div>
  <div class="spinner-box">
    <div class="configure-border-1">
      <div class="configure-core"></div>
    </div>
    <div class="configure-border-2">
      <div class="configure-core"></div>
    </div>
    <div class="loading-word">加载中...</div>
  </div>
</div>

<script>
  var endLoading = function () {
    document.body.style.overflow = 'auto';
    document.getElementById('loader').classList.add("loading");
  }
  window.addEventListener('DOMContentLoaded',endLoading);
  
</script>

    
    <!-- 判断是否为暗黑风格 -->
    <!-- 判断是否为黑夜模式 -->
<script>
  let isDark = JSON.parse(localStorage.getItem('dark')) || JSON.parse('false');

  if (isDark) {
    $(document.body).addClass('darkModel');
  }
</script>

    <!-- 需要在上面加载的js -->
    <script>
  function loadScript(src, cb) {
    return new Promise(resolve => {
      setTimeout(function () {
        var HEAD = document.getElementsByTagName("head")[0] || document.documentElement;
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        if (cb) {
          if (JSON.stringify(cb)) {
            for (let p in cb) {
              if (p == "onload") {
                script[p] = () => {
                  cb[p]()
                  resolve()
                }
              } else {
                script[p] = cb[p]
                script.onload = resolve
              }
            }
          } else {
            script.onload = () => {
              cb()
              resolve()
            };
          }
        } else {
          script.onload = resolve
        }
        script.setAttribute("src", src);
        HEAD.appendChild(script);
      });
    });
  }

  //https://github.com/filamentgroup/loadCSS
  var loadCSS = function (href, before, media, attributes) {
    return new Promise(resolve => {
      setTimeout(function () {
        var link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = src;
        link.onload = resolve;
        document.getElementsByTagName("head")[0].appendChild(link);
      });
    });
  };

</script> 

<!-- 轮播图所需要的js -->
<script src="/js/swiper/swiper.min.js"></script>
<script src="/js/swiper/vue-awesome-swiper.js"></script>
<script src="/js/swiper/swiper.animate1.0.3.min.js"></script>

<script type="text/javascript">
  Vue.use(window.VueAwesomeSwiper)
</script>


  <script src="/js/vue-typed-js/index.js"></script>


<!-- 首页的公告滚动插件的js需要重新加载 -->
<script src="/js/vue-seamless-scroll/index.js"></script>

<!-- 打字机效果js -->
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>


    <div id="safearea">
      <main class="main" id="pjax-container">
        <!-- 头部导航 -->
        
<header class="header   " 
  id="navHeader"
  style="position: fixed;
  left: 0; top: 0; z-index: 10;width: 100%;"
>
  <div class="header-content">
    <div class="bars">
      <div id="appDrawer" class="sidebar-image">
  <div class="drawer-box-icon">
    <i class="fas fa-bars" aria-hidden="true" @click="showDialogDrawer"></i>
  </div>
  
  <transition name="fade">
    <div class="drawer-box_mask" v-cloak style="display: none;" v-show="visible" @click.self="cancelDialogDrawer">
    </div>
  </transition>
  <div class="drawer-box" :class="{'active': visible}">
    <div class="drawer-box-head bg-color">
      <img class="drawer-box-head_logo lazyload placeholder" src="/medias/logo.png" class="lazyload placeholder" data-srcset="/medias/logo.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="logo">
      <h3 class="drawer-box-head_title">gy的小站</h3>
      <h5 class="drawer-box-head_desc">滴水穿石不是水的力量,而是坚持的力量</h5>
    </div>
    
    <div class="drawer-box-content">
      <ul class="drawer-box-content_menu">
        
          
            <li class="drawer-box-content_item" style="position: relative;">
              
                <a href="/" class="drawer-menu-item-link">
                  
                    <i class="fas fa-home" aria-hidden="true"></i>
                  
                  <span class="name">首页</span>
                </a>
              
            </li>
          
            <li class="drawer-box-content_item" style="position: relative;">
              
                <a href="/archives" class="drawer-menu-item-link">
                  
                    <i class="fas fa-archive" aria-hidden="true"></i>
                  
                  <span class="name">归档</span>
                </a>
              
            </li>
          
            <li class="drawer-box-content_item" style="position: relative;">
              
                <a href="/tags" class="drawer-menu-item-link">
                  
                    <i class="fas fa-tags" aria-hidden="true"></i>
                  
                  <span class="name">标签</span>
                </a>
              
            </li>
          
            <li class="drawer-box-content_item" style="position: relative;">
              
                <a href="/categories" class="drawer-menu-item-link">
                  
                    <i class="fas fa-bookmark" aria-hidden="true"></i>
                  
                  <span class="name">分类</span>
                </a>
              
            </li>
          
            <li class="drawer-box-content_item" style="position: relative;">
              
                <a href="/about" class="drawer-menu-item-link">
                  
                    <i class="fas fa-user" aria-hidden="true"></i>
                  
                  <span class="name">关于</span>
                </a>
              
            </li>
          
            <li class="drawer-box-content_item" style="position: relative;">
              
                <a href="/friends" class="drawer-menu-item-link">
                  
                  <span class="name">友情链接</span>
                </a>
              
            </li>
          
            <li class="drawer-box-content_item" style="position: relative;">
              
                <a href="javascript:;" class="drawer-menu-item-link has-children" @click="openOrCloseMenu(6)">
                  <span>
                    
                      <i class="fas fa-link"></i>
                    
                    <span class="name">更多</span>
                  </span>
                  <i class="fas fa-chevron-left arrow " :class="{'icon-rotate': isOpen(6)}" aria-hidden="true"></i>
                </a>
                <ul class="drawer-sub-menu" v-if="isOpen(6)">
                  
                  <li>
                    <a href="/gallery">
                      
                      <i class="fas fa-music" style="margin-top: -20px;"></i>
                      
                      <span>工大风光</span>
                    </a>
                  </li>
                  
                  <li>
                    <a href="/huoban">
                      
                      <i class="fas fa-film" style="margin-top: -20px;"></i>
                      
                      <span>资源推荐</span>
                    </a>
                  </li>
                  
                  <li>
                    <a href="/me">
                      
                      <i class="fas fa-film" style="margin-top: -20px;"></i>
                      
                      <span>考研与就业</span>
                    </a>
                  </li>
                  
                  <li>
                    <a target="_blank" rel="noopener" href="http://baidu.com">
                      
                      <i class="fas fa-film" style="margin-top: -20px;"></i>
                      
                      <span>百度</span>
                    </a>
                  </li>
                  
                </ul>
              
            </li>
          
        
        
          <li class="drawer-box-content_item">
            <a target="_blank" rel="noopener" href="https://github.com/gaoyangya">
              <i class="fas fa-github" aria-hidden="true"></i>
              <span>Github</span>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>

<script>
  var body = document.body || document.documentElement || window;
  var vm = new Vue({
    el: '#appDrawer',
    data: {
      visible: false,
      top: 0,
      openArr: [],
    },
    computed: {
    },
    mounted() {
    },
    methods: {
      isOpen(index) {
        if (this.openArr.includes(index)) {
          return true;
        } else {
          return false;
        }
      },
      openOrCloseMenu(curIndex) {
        const index = this.openArr.indexOf(curIndex);
        if (index !== -1) {
          this.openArr.splice(index, 1);
        } else {
          this.openArr.push(curIndex);
        }
      },
      showDialogDrawer() {
        this.visible = true;
        // 防止页面滚动，只能让弹框滚动
        this.top = $(document).scrollTop()
        body.style.cssText = 'width: 100%; height: 100%;overflow: hidden;';
      },
      cancelDialogDrawer() {
        this.visible = false;
        body.removeAttribute('style');
        $(document).scrollTop(this.top)
      }
    },
    created() {}
  })
</script>

    </div>
    <div class="blog-title" id="author-avatar">
      
        <div class="avatar">
          <img src="/medias/logo.png" class="lazyload placeholder" data-srcset="/medias/logo.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="logo">
        </div>
      
      <a href="/" class="logo">gy的小站</a>
    </div>
    <nav class="navbar">
      <ul class="menu">
        
          
            <li class="menu-item" style="position: relative;">
              
                <a href="/" class="menu-item-link" title="首页">
                  
                    <i class="fas fa-home" aria-hidden="true"></i>
                  
                  <span class="name">首页</span>
                </a>
              
            </li>
          
            <li class="menu-item" style="position: relative;">
              
                <a href="/archives" class="menu-item-link" title="归档">
                  
                    <i class="fas fa-archive" aria-hidden="true"></i>
                  
                  <span class="name">归档</span>
                </a>
              
            </li>
          
            <li class="menu-item" style="position: relative;">
              
                <a href="/tags" class="menu-item-link" title="标签">
                  
                    <i class="fas fa-tags" aria-hidden="true"></i>
                  
                  <span class="name">标签</span>
                </a>
              
            </li>
          
            <li class="menu-item" style="position: relative;">
              
                <a href="/categories" class="menu-item-link" title="分类">
                  
                    <i class="fas fa-bookmark" aria-hidden="true"></i>
                  
                  <span class="name">分类</span>
                </a>
              
            </li>
          
            <li class="menu-item" style="position: relative;">
              
                <a href="/about" class="menu-item-link" title="关于">
                  
                    <i class="fas fa-user" aria-hidden="true"></i>
                  
                  <span class="name">关于</span>
                </a>
              
            </li>
          
            <li class="menu-item" style="position: relative;">
              
                <a href="/friends" class="menu-item-link" title="友情链接">
                  
                  <span class="name">友情链接</span>
                </a>
              
            </li>
          
            <li class="menu-item" style="position: relative;">
              
                <a href="javascript:;" class="menu-item-link" title="更多">
                  
                    <i class="fas fa-link"></i>
                  
                  <span class="name">更多</span>
                  <i class="fas fa-chevron-down arrow" aria-hidden="true"></i>
                </a>
                <ul class="sub-menu">
                  
                  <li>
                    <a href="/gallery">
                      
                      <i class="fas fa-music" style="margin-top: -20px;"></i>
                      
                      <span>工大风光</span>
                    </a>
                  </li>
                  
                  <li>
                    <a href="/huoban">
                      
                      <i class="fas fa-film" style="margin-top: -20px;"></i>
                      
                      <span>资源推荐</span>
                    </a>
                  </li>
                  
                  <li>
                    <a href="/me">
                      
                      <i class="fas fa-film" style="margin-top: -20px;"></i>
                      
                      <span>考研与就业</span>
                    </a>
                  </li>
                  
                  <li>
                    <a target="_blank" rel="noopener" href="http://baidu.com">
                      
                      <i class="fas fa-film" style="margin-top: -20px;"></i>
                      
                      <span>百度</span>
                    </a>
                  </li>
                  
                </ul>
              
            </li>
          
        
      </ul>
      
      
        <div id="appSearch">
  <div class="search"  @click="showDialog()"><i class="fas fa-search" aria-hidden="true"></i></div>
  <transition name="fade">
    <div class="message-box_wrapper" style="display: none;" v-cloak v-show="dialogVisible" @click.self="cancelDialogVisible()">
      <div class="message-box animated bounceInDown">
        <h2>
          <span>
            <i class="fas fa-search" aria-hidden="true"></i>
            <span class="title">本地搜索</span>
          </span>
          <i class="fas fa-times close" pointer style="float:right;" aria-hidden="true" @click.self="cancelDialogVisible()"></i>
        </h2>
        <form class="site-search-form">
          <input type="text"
            placeholder="请输入关键字"
            id="local-search-input" 
            @click="getSearchFile()"
            class="st-search-input"
            v-model="searchInput"
          />
        </form>
        <div class="result-wrapper">
          <div id="local-search-result" class="local-search-result-cls"></div>
        </div>
      </div>
    </div>
  </transition>
</div>
<script src="/js/local_search.js"></script>
<script>
  var body = document.body || document.documentElement || window;
  var vm = new Vue({
    el: '#appSearch',
    data: {
      dialogVisible: false,
      searchInput: '',
      top: 0,
    },
    computed: {
    },
    mounted() {
      window.addEventListener('pjax:complete', () => {
        this.cancelDialogVisible();
      })
    },
    methods: {
      showDialog() {
        this.dialogVisible = true;
        // 防止页面滚动，只能让弹框滚动
        this.top = $(document).scrollTop()
        body.style.cssText = 'overflow: hidden;';
      },
      getSearchFile() {
        if (!this.searchInput) {
          getSearchFile("/search.xml");
        }
      },
      cancelDialogVisible() {
        this.dialogVisible = false;
        body.removeAttribute('style');
        $(document).scrollTop(this.top)
      },
    },
    created() {}
  })
</script>
<!-- 解决刷新页面闪烁问题，可以在元素上添加display: none, 或者用vue.extend方法，详情：https://blog.csdn.net/qq_31393401/article/details/81017912 -->
<!-- 下面是搜索基本写法 -->
<!-- <script type="text/javascript" id="local.search.active">
  var inputArea = document.querySelector("#local-search-input");
  inputArea.onclick   = function(){ getSearchFile(); this.onclick = null }
  inputArea.onkeydown = function(){ if(event.keyCode == 13) return false }
</script> -->

      

    </nav>
  </div>
  
    <a target="_blank" rel="noopener" href="https://github.com/gaoyangya" class="github-corner color-primary" aria-label="View source on GitHub"><svg width="60" height="60" viewBox="0 0 250 250" style="fill:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  
  
    <div id="he-plugin-simple"></div>
    <script>
      WIDGET = {
        CONFIG: {
          "modules": "012",
          "background": 5,
          "tmpColor": "4A4A4A",
          "tmpSize": 16,
          "cityColor": "4A4A4A",
          "citySize": 16,
          "aqiSize": 16,
          "weatherIconSize": 24,
          "alertIconSize": 18,
          "padding": "10px 10px 10px 10px",
          "shadow": "1",
          "language": "auto",
          "borderRadius": 5,
          "fixed": "false",
          "vertical": "middle",
          "horizontal": "center",
          "key": "2784dd3fcb1e4f0f9a9b579bf69641f2"
        }
      }
    </script>
    <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script> 
    
</header>
        <!-- 内容区域 -->
        
 <!-- prismjs 代码高亮 -->
 
    
    <link href="/js/prism/prism-line-numbers.css" rel="stylesheet">
    
        <link href="/js/prism/prism.min.css" rel="stylesheet">
    

    <style>
        pre[class*="language-"] {
            overflow-y: hidden;
        }
        .line-numbers .line-numbers-rows {
            border: none;
        }
    </style>
  


<div class="bg-dark-floor" style="position: fixed;left: 0;top: 0;width: 100%;height: 100%;z-index: -1;"></div>


  <!-- 文章详情页顶部图片和标题 -->




<div class="post-detail-header" id="thumbnail_canvas" style="background-repeat: no-repeat; background-size: cover; 
  background-position: center center;position: relative;background-image:url('/medias/5.jpg')">
  <div class="post-detail-header-mask"></div>
  <canvas id="header_canvas"style="position:absolute;bottom:0;pointer-events:none;"></canvas>
  
  <div class="post-detail-header_info-box">
    <div class="title-box">
      <span class="title">
        JavaWeb
      </span>
    </div>
    
    
      
        <span class="post-detail-header_date">
          <i class="fas fa-calendar"></i> 发表于：2021-09-18 |
        </span>
      

      
        <span class="post-detail-header_categories">
          <i class="iconfont iconbookmark1"></i> 分类：
          
            <a href="/categories/%E5%90%8E%E7%AB%AF/" class="post-detail-header_category">
              后端
            </a>
          
            <a href="/categories/%E5%90%8E%E7%AB%AF/JavaWeb/" class="post-detail-header_category">
              JavaWeb
            </a>
          
        </span>
      

      
    
  </div>
  
  
    <script src="/js/bubble/bubble.js"></script>
  
</div>





<div class="row justify-position" 
  style="padding-top: 0px;">
  <div class="main-content">
    <article class="post post-detail">
      <div class="post-content">
        <h1 id="javaWeb"><a href="#javaWeb" class="headerlink" title="javaWeb"></a>javaWeb</h1><blockquote>
<p>即使再小的帆也能远航~</p>
</blockquote>
<h1 id="一-目录"><a href="#一-目录" class="headerlink" title="一.目录"></a>一.目录</h1><h2 id="1-建立一个web工程"><a href="#1-建立一个web工程" class="headerlink" title="1.建立一个web工程"></a><a href="#1">1.建立一个web工程</a></h2><h2 id="2-Servlet"><a href="#2-Servlet" class="headerlink" title="2.Servlet"></a><a href="#2">2.Servlet</a></h2><h2 id="3-ServletConfig类"><a href="#3-ServletConfig类" class="headerlink" title="3.ServletConfig类"></a><a href="#3">3.ServletConfig类</a></h2><h2 id="4-Http协议"><a href="#4-Http协议" class="headerlink" title="4.Http协议"></a><a href="#4">4.Http协议</a></h2><h2 id="5-HttpServletRequest"><a href="#5-HttpServletRequest" class="headerlink" title="5.HttpServletRequest"></a><a href="#5">5.HttpServletRequest</a></h2><h2 id="6-HttpServletResponse"><a href="#6-HttpServletResponse" class="headerlink" title="6.HttpServletResponse"></a><a href="#6">6.HttpServletResponse</a></h2><h2 id="7-JSP"><a href="#7-JSP" class="headerlink" title="7.JSP"></a><a href="#7">7.JSP</a></h2><h2 id="8-El表达式"><a href="#8-El表达式" class="headerlink" title="8.El表达式"></a><a href="#8">8.El表达式</a></h2><h2 id="9-JSTL标签库"><a href="#9-JSTL标签库" class="headerlink" title="9.JSTL标签库"></a><a href ="#9">9.JSTL标签库</a></h2><h2 id="10-JSON"><a href="#10-JSON" class="headerlink" title="10.JSON"></a><a href="#10">10.JSON</a></h2><h2 id="11-AJAX"><a href="#11-AJAX" class="headerlink" title="11.AJAX"></a><a href="#11">11.AJAX</a></h2><h2 id="12-Cookie"><a href="#12-Cookie" class="headerlink" title="12 .Cookie"></a><a href="12">12 .Cookie</a></h2><h2 id="13-Session"><a href="#13-Session" class="headerlink" title="13 .Session"></a><a href="13">13 .Session</a></h2><h2 id="14-Filter过滤器"><a href="#14-Filter过滤器" class="headerlink" title="14.Filter过滤器"></a><a href="#14">14.Filter过滤器</a></h2><h2 id="15-Listener监听器"><a href="#15-Listener监听器" class="headerlink" title="15.Listener监听器"></a><a href="#15">15.Listener监听器</a></h2><h2 id="16-文件上传下载"><a href="#16-文件上传下载" class="headerlink" title="16. 文件上传下载"></a><a href="#16">16. 文件上传下载</a></h2><h2 id="17-数据库连接池"><a href="#17-数据库连接池" class="headerlink" title="17.数据库连接池"></a><a href="#17">17.数据库连接池</a></h2><h1 id="二-内容"><a href="#二-内容" class="headerlink" title="二.内容"></a>二.内容</h1><h2 id="1-建立一个web工程-1"><a href="#1-建立一个web工程-1" class="headerlink" title="1.建立一个web工程"></a><a id="1">1.建立一个web工程</a></h2><ol>
<li><p>新建一个maven项目</p>
</li>
<li><p>导入依赖</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>添加java,resource.java下建包,包下建类写代码</p>
</li>
<li><p>在WEB-INF的web.xml里面添加映射</p>
</li>
<li><p>在webapp下写jsp文件</p>
</li>
</ol>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524753.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524753.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110091955751"></p>
<ol start="6">
<li><p>配置Tomcat</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524342.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524342.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110093349533"></p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524243.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524243.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110093543554"></p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524635.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524635.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110093747198"></p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524975.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524975.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110093919863"></p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524725.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524725.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110094024199"></p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524054.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524054.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110094100732"></p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524923.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524923.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110094619339"></p>
</li>
</ol>
<h2 id="2-Servlet-1"><a href="#2-Servlet-1" class="headerlink" title="2.Servlet"></a><a id="2">2.Servlet</a></h2><h3 id="2-1什么是Servlet"><a href="#2-1什么是Servlet" class="headerlink" title="2.1什么是Servlet"></a>2.1什么是Servlet</h3><ol>
<li>Servlet是JavaEE规范之一。规范就是接口</li>
<li>Servlet就JavaWeb三大组件之一。三大组件分别是：<strong>Servlet程序、Filter过滤器、Listener监听器.</strong></li>
<li>Servlet是运行在<strong>服务器</strong>上的一个java小程序，它可以接收客户端发送过来的请求，并响应数据给客户端。</li>
</ol>
<h3 id="2-2-手动实现Servlet程序"><a href="#2-2-手动实现Servlet程序" class="headerlink" title="2.2 手动实现Servlet程序"></a>2.2 手动实现Servlet程序</h3><ol>
<li><p>编写一个类去实现Servlet接口</p>
</li>
<li><p>实现service方法，处理请求，并响应数据</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet01</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>

    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"service方法实现liao~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>到web.xml中去配置servlet程序的访问地址</p>
<p><strong>URL地址到Servlet程序访问</strong><br><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524375.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524375.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110095405154"></p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">web-app</span> <span class="token name">PUBLIC</span>
 <span class="token string">"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span>
 <span class="token string">"http://java.sun.com/dtd/web-app_2_3.dtd"</span> <span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">></span></span>Archetype Created Web Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--servlet标签给Tomcat配置Servlet程序--></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!--servlet-name标签Servlet程序起一个别名（一般是类名）--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>Servlet01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!--servlet-class是Servlet程序的全类名--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>pri.Servlet01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--servlet-mapping标签给servlet程序配置访问地址--></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!--servlet-name标签的作用是告诉服务器，我当前配置的地址给哪个Servlet程序使用--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>Servlet01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!--url-pattern标签配置访问地址&lt;br/>/斜杠在服务器解析的时候，表示地址为：http://ip:port/工程路径&lt;br/>/hello表示地址为：http://ip:port/工程路径/hello&lt;br/>--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/Servlet01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>tomcat运行,通过浏览器地址栏访问<br><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524997.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524997.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110094920735"></p>
<p>之后回车,然后回idea查看<br>发现:<code>service方法实现liao~</code></p>
</li>
</ol>
<h3 id="2-3-Servlet的生命周期"><a href="#2-3-Servlet的生命周期" class="headerlink" title="2.3 Servlet的生命周期"></a>2.3 Servlet的生命周期</h3><ol>
<li>执行Servlet构造器方法</li>
<li>执行init初始化方法<br>第一、二步，是在第一次访问，的时候创建Servlet程序会调用。</li>
<li>执行<strong>service方法</strong>第三步，每次访问都会调用。<br><font color= red><strong>service方法是专门用来处理请求和响应的</strong></font></li>
<li>执行destroy销毁方法第四步，在web工程停止的时候调用(先调用,后销毁)</li>
</ol>
<h3 id="2-4-GET和POST请求的分发处理"><a href="#2-4-GET和POST请求的分发处理" class="headerlink" title="2.4 GET和POST请求的分发处理"></a>2.4 GET和POST请求的分发处理</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet01</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>

    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"service方法实现liao~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//类型转换,因为HttpServletRequest有getMethod()方法</span>
        <span class="token class-name">HttpServletRequest</span> httpServletRequeest <span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>servletRequest<span class="token punctuation">;</span>
        <span class="token comment">//获取请求的方式</span>
        <span class="token class-name">String</span> method <span class="token operator">=</span> httpServletRequeest<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"post请求~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"GET请求~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
service方法实现liao<span class="token operator">~</span>
GET请求<span class="token operator">~</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><font color=red><strong>从地址栏访问的,都是GET</strong></font></p>
<h3 id="2-5-Servlet类的继承体系"><a href="#2-5-Servlet类的继承体系" class="headerlink" title="2.5 Servlet类的继承体系"></a>2.5 Servlet类的继承体系</h3><p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524303.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231524303.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110103706694"></p>
<p>Servlet需要重写所有的方法,GenericServlet只需要重写service()方法就行了,HttpServlet可以直接写doGet()或doPost()方法</p>
<h3 id="2-6-通过继承HttpServlet实现Servlet程序"><a href="#2-6-通过继承HttpServlet实现Servlet程序" class="headerlink" title="2.6 通过继承HttpServlet实现Servlet程序"></a>2.6 通过继承HttpServlet实现Servlet程序</h3><p>一般在实际项目开发中，都是使用继承HttpServlet类的方式去实现Servlet程序。</p>
<ol>
<li>编写一个类去<strong>继承</strong>HttpServlet类</li>
<li>根据业务需要重写doGet或doPost方法</li>
<li>到web.xml中的配置Servlet程序的访问地址</li>
</ol>
<h2 id="3-ServletConfig类-1"><a href="#3-ServletConfig类-1" class="headerlink" title="3.ServletConfig类"></a><a id="3">3.ServletConfig类</a></h2><p>ServletConfig类从类名上来看，就知道是Servlet程序的<strong>配置信息类</strong>。</p>
<p>Servlet程序和ServletConfig对象都是由<strong>Tomcat负责创建</strong>，我们<strong>负责使用</strong>。</p>
<p><font color=red><strong>Servlet程序默认是第一次访问的时候创建，ServletConfig是每个Servlet程序创建时，就创建一个对应的ServletConfig对象。</strong></font></p>
<h3 id="3-1-ServletConfig类的三大作用"><a href="#3-1-ServletConfig类的三大作用" class="headerlink" title="3.1 ServletConfig类的三大作用"></a>3.1 ServletConfig类的三大作用</h3><p>在web.xml的&lt;Servlet&gt;&lt;/Servlet&gt;里面写&lt;init-param&gt;&lt;\init-param&gt;</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">web-app</span> <span class="token name">PUBLIC</span>
 <span class="token string">"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span>
 <span class="token string">"http://java.sun.com/dtd/web-app_2_3.dtd"</span> <span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">></span></span>Archetype Created Web Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>Servlet01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>pri.Servlet01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!--是参数名--></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!--是参数值--></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--init-param是初始化参数--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!--是参数名--></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>url<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!--是参数值--></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>jdbc:mysql://localhost:3306/test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>Servlet01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/Servlet01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol>
<li><p>可以获取Servlet程序的<strong>别名</strong>servlet-name的值</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">servletConfig<span class="token punctuation">.</span><span class="token function">getServletName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//成员方法</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>获取<strong>初始化参数</strong>init-param</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">servletConfig<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"参数名"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//成员方法</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>获取<strong>ServletContext</strong>对象</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">servletConfig<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//成员方法</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>注意:调用ServletConfig类的这三个方法的方式</strong><br>在实现Servlet类里面(一般不用)</p>
<ol>
<li><p>在init()方法中由servletConfig对象去调</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>1)去覆盖重写的Servlet类中的getServletConfig() 里</p>
<p>原先:</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>你需要:new一个servletConfig对象,但是ServletConfig是抽象的,需要重写</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
       <span class="token class-name">ServletConfig</span> servletConfig<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
           <span class="token annotation punctuation">@Override</span>
           <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
               <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span>
   
           <span class="token annotation punctuation">@Override</span>
           <span class="token keyword">public</span> <span class="token class-name">ServletContext</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
               <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span>
   
           <span class="token annotation punctuation">@Override</span>
           <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
               <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span>
   
           <span class="token annotation punctuation">@Override</span>
           <span class="token keyword">public</span> <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getInitParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
               <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span>
       <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> servletConfig<span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>2)去service()方法中</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">ServletConfig</span> servletConfig <span class="token operator">=</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>servletConfig<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>太麻烦了……</p>
</li>
</ol>
<p>在继承HttpServlet类里面</p>
<ol>
<li><p>在doGet()或者doPost()里面直接</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpServlet01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<p>这也说明了HttpServlet的优越性!~</p>
<h3 id="3-2-ServletContext类"><a href="#3-2-ServletContext类" class="headerlink" title="3.2 ServletContext类"></a>3.2 ServletContext类</h3><h4 id="3-2-1-什么是ServletContext"><a href="#3-2-1-什么是ServletContext" class="headerlink" title="3.2.1 什么是ServletContext"></a>3.2.1 什么是ServletContext</h4><ol>
<li>ServletContext是一个接口，它表示<strong>Servlet上下文对象</strong></li>
<li>一个web工程，只有<strong>一个</strong>ServletContext对象实例。</li>
<li>ServletContext对象是一个<strong>域对象</strong>。</li>
<li>ServletContext是在<strong>web工程部署启动</strong>的时候创建。在web工程<strong>停止的时候销毁</strong>。</li>
</ol>
<p>什么是域对象?</p>
<p><font color=red><strong>域对象，是可以像Map一样存取数据的对象</strong></font>，叫域对象。这里的域指的是存取数据的<strong>操作范围:整个web工程</strong>。</p>
<table>
<thead>
<tr>
<th></th>
<th>存数据</th>
<th>取数据</th>
<th>删除数据</th>
</tr>
</thead>
<tbody><tr>
<td>Map</td>
<td>put()</td>
<td>get()</td>
<td>remove()</td>
</tr>
<tr>
<td>域对象</td>
<td>setAttribute()</td>
<td>getAttribute()</td>
<td>removeAttribute();</td>
</tr>
</tbody></table>
<h4 id="3-2-2-ServletContext类的四个作用"><a href="#3-2-2-ServletContext类的四个作用" class="headerlink" title="3.2.2 ServletContext类的四个作用"></a>3.2.2 ServletContext类的四个作用</h4><p>web.xml中的配置</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--context-param是上下文参数(它属于整个web工程)--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!--context-param是上下文参数(它属于整个web工程)--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在doGet()或者doPost()方法中</p>
<ol>
<li><p>获取web.xml中配置的<strong>上下文参数context-param</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">ServletContextcontext</span><span class="token operator">=</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stringusername</span><span class="token operator">=</span>context<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token string">"参数名"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><p>获取当前的<strong>工程路径，格式:/工程路径</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">ServletContextcontext</span><span class="token operator">=</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><p>获取工程部署后在服务器硬盘上的<strong>绝对路径</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
*斜杠被服务器解析地址为:http://ip:port/工程名/映射到IDEA代码的web目录&lt;br/>
*/</span>
工程部署的路径是<span class="token operator">:</span>context<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
工程下css目录的绝对路径是<span class="token operator">:</span>context<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/css"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
工程下imgs目录<span class="token number">1.</span>jpg的绝对路径是<span class="token operator">:</span>context<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/imgs/1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p><strong>像Map一样存取数据</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContextServlet1</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span> 
  <span class="token keyword">protected</span> <span class="token keyword">void</span> doGet <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">//获取ServletContext对象</span>
      <span class="token class-name">ServletContext</span> context<span class="token operator">=</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"保存之前:Context1获取key1的值是:"</span><span class="token operator">+</span>context<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      context<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span><span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Context1中获取域数据key1的值是:"</span><span class="token operator">+</span>context<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h2 id="4-Http-协议"><a href="#4-Http-协议" class="headerlink" title="4.Http 协议"></a><a id="4">4.Http 协议</a></h2><h3 id="4-1-什么是Http协议"><a href="#4-1-什么是Http协议" class="headerlink" title="4.1 什么是Http协议"></a>4.1 什么是Http协议</h3><p>客户端和服务器之间通信时，发送的数据，需要遵守的规则，叫HTTP协议。HTTP协议中的数据又叫报文。</p>
<h3 id="4-2-请求的HTTP协议格式"><a href="#4-2-请求的HTTP协议格式" class="headerlink" title="4.2 请求的HTTP协议格式"></a>4.2 请求的HTTP协议格式</h3><p>客户端给服务器发送数据叫请求。</p>
<p>服务器给客户端回传数据叫响应。</p>
<p>请求又分为GET请求，和POST请求两种</p>
<h4 id="4-2-1-GET请求"><a href="#4-2-1-GET请求" class="headerlink" title="4.2.1 GET请求"></a>4.2.1 GET请求</h4><ul>
<li>请求行</li>
</ul>
<ol>
<li>请求的方式GET</li>
<li>请求的资源路径[+?+请求参数]</li>
<li>请求的协议的版本号HTTP/1.1</li>
</ol>
<ul>
<li>请求头</li>
</ul>
<p>key:value键值对的形式组成,不同的键值对，表示不同的含义。</p>
<ul>
<li><p>请求空行</p>
</li>
<li><p>请求体</p>
</li>
</ul>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525614.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525614.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110131947002"></p>
<h4 id="4-2-2-Post请求"><a href="#4-2-2-Post请求" class="headerlink" title="4.2.2 Post请求"></a>4.2.2 Post请求</h4><ul>
<li>请求行</li>
</ul>
<ol>
<li>请求的方式POST</li>
<li>请求的资源路径[+?+请求参数</li>
<li>请求的协议的版本号HTTP/1.1</li>
</ol>
<ul>
<li>请求头<br>key:value不同的请求头，有不同的含义</li>
<li>请求空行</li>
<li>请求体</li>
</ul>
<p>就是发送给服务器的数据</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525176.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525176.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110132201005"></p>
<hr>
<p><strong>常用请求头</strong></p>
<p>Accept:表示客户端可以接收的数据类型</p>
<p>Accpet-Languege:表示客户端可以接收的语言类型</p>
<p>User-Agent:表示客户端浏览器的信息</p>
<p>Host：表示请求时的服务器ip和端口号</p>
<hr>
<p><strong>GET请求</strong></p>
<ol>
<li>form标签method=get</li>
<li>a标签</li>
<li>link标签引入css</li>
<li>Script标签引入js文件</li>
<li>img标签引入图片</li>
<li>iframe引入html页面</li>
<li>在浏览器地址栏中输入地址后敲回车</li>
</ol>
<p><strong>Post请求</strong></p>
<p>form标签method=post</p>
<h4 id="4-2-3-响应的HTTP协议格式"><a href="#4-2-3-响应的HTTP协议格式" class="headerlink" title="4.2.3 响应的HTTP协议格式"></a>4.2.3 响应的HTTP协议格式</h4><ul>
<li>响应行</li>
</ul>
<ol>
<li>响应的协议和版本号</li>
<li>响应状态码</li>
<li>响应状态描述符</li>
</ol>
<ul>
<li>响应头</li>
</ul>
<p>key:value不同的响应头，有其不同含义</p>
<ul>
<li>响应空行</li>
<li>响应体</li>
</ul>
<p>就是回传给客户端的数据</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525030.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525030.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110133059500"></p>
<h2 id="5-HttpServletRequest-1"><a href="#5-HttpServletRequest-1" class="headerlink" title="5.HttpServletRequest"></a><a id="5">5.HttpServletRequest</a></h2><h3 id="5-1-HttpServletRequest类作用"><a href="#5-1-HttpServletRequest类作用" class="headerlink" title="5.1 HttpServletRequest类作用"></a>5.1 HttpServletRequest类作用</h3><p>每次只要有<strong>请求进入Tomcat服务器</strong>，Tomcat服务器就会<strong>把请求过来的HTTP协议信息解析好封装到Request对象中</strong>。然后<strong>传递到service方法（doGet和doPost）</strong>中给我们使用。我们可以通过HttpServletRequest对象，获取到所有请求的信息。</p>
<h3 id="5-2-HttpServletRequest类的常用方法"><a href="#5-2-HttpServletRequest类的常用方法" class="headerlink" title="5.2 HttpServletRequest类的常用方法"></a>5.2 HttpServletRequest类的常用方法</h3><p>由HttpServletRequest类的对象req去调用</p>
<ul>
<li>getRequestURI()            获取请求的资源路径   <strong>就是映射里&lt;Servlet-mapping&gt;里的&lt;url-pattarning&gt;.eg:<code>/Servlet01</code></strong></li>
<li>getRequestURL()           获取请求的统一资源定位符（<strong>绝对路径</strong>) </li>
<li>getRemoteHost()           获取客户端的ip地址</li>
<li>getHeader()                    获取请求头v.getParameter()获取请求的参数</li>
<li>getParameterValues()         获取请求的参数（多个值的时候使用)</li>
<li>getMethod()                  获取请求的方式GET或POST</li>
<li>setAttribute(key,value)       设置域数据</li>
<li>getAttribute(key)                 获取域数据</li>
<li>getRequestDispatcher()     获取请求转发对象</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestAPIServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span> 
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">protected</span> <span class="token keyword">void</span> doGet <span class="token punctuation">(</span> <span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp <span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//i.getRequestURI()获取请求的资源路径</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"URI=>"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ii.getRequestURL()获取请求的统一资源定位符（绝对路径）</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"URL=>"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//iii.getRemoteHost()获取客户端的ip地址</span>
        <span class="token comment">/**
        *在IDEA中，使用localhost访问时，得到的客户端ip地址是===>>>127.0.0.1&lt;br/>
        *在IDEA中，使用127.0.0.1访问时，得到的客户端ip地址是===>>>127.0.0.1&lt;br/>
        *在IDEA中，使用真实ip访问时，得到的客户端ip地址是===>>>真实的客户端ip地址&lt;br/>
        */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"客户端ip地址=>"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//iv.getHeader()获取请求头</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请求头User-Agent==>>"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//vii.getMethod()获取请求的方式GET或POST</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请求的方式==>>"</span><span class="token operator">+</span>req<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-3-doGet解决中文乱码"><a href="#5-3-doGet解决中文乱码" class="headerlink" title="5.3 doGet解决中文乱码"></a>5.3 doGet解决中文乱码</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//获取请求参数</span>
<span class="token class-name">String</span> username<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1先以iso8859-1进行编码</span>
<span class="token comment">//2再以utf-8进行解码</span>
username<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"iso-8859-1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-4-POST请求的中文乱码解决"><a href="#5-4-POST请求的中文乱码解决" class="headerlink" title="5.4 POST请求的中文乱码解决"></a>5.4 POST请求的中文乱码解决</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//设置请求体的字符集为UTF-8，从而解决post请求的中文乱码问题</span>
req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="5-5-请求的转发"><a href="#5-5-请求的转发" class="headerlink" title="5.5 请求的转发"></a>5.5 请求的转发</h3><p>请求转发是指，服务器收到请求后，从一次资源跳转到另一个资源的操作叫请求转发</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525083.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525083.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110141117136"></p>
<p>HttpServlet01</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpServlet01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
       <span class="token comment">//1.获取请求参数(查看办事材料)</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"在HttpServlet01中查看参数:"</span><span class="token operator">+</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.盖章</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span><span class="token string">"HttpServlet01的章"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.指路其他Servlet程序</span>
        <span class="token comment">/**
         * 请求转发必须要以斜杠打头,斜杠表示地址为:http://ip:port/工程名/,映射到idea代码的web目录中
         */</span>
        <span class="token class-name">RequestDispatcher</span> requestDispatcher <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/httpServlet02"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这里写的是&lt;url-pattern>里的内容</span>
        <span class="token comment">//4.动其他Servlet程序</span>
        requestDispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>HttpServlet02</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpServlet02</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//1.获取请求的参数(参看办事材料)</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"在HttpServlet02中查看参数:"</span><span class="token operator">+</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.查看是否有章</span>
        <span class="token class-name">Object</span> key1 <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"HttpServlet01是否有章:"</span><span class="token operator">+</span>key1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.处理自己的业务</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"HttpServlet02开始忙自己的事情~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525942.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525942.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110150223821"></p>
<p>最后,别忘记web.xml里面加映射~</p>
<h3 id="5-6-base标签的作用"><a href="#5-6-base标签的作用" class="headerlink" title="5.6 base标签的作用"></a>5.6 base标签的作用</h3><h3 id="5-7-Web中的相对路径和绝对路径"><a href="#5-7-Web中的相对路径和绝对路径" class="headerlink" title="5.7 Web中的相对路径和绝对路径"></a>5.7 Web中的相对路径和绝对路径</h3><p>在javaWeb中，路径分为相对路径和绝对路径两种：</p>
<p>相对路径是：</p>
<p>.   表示当前目录</p>
<p>..  表示上一级目录</p>
<p>资源名         表示当前目录/资源名</p>
<p>绝对路径：</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">http://ip:port/工程路径/资源路径<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>在实际开发中，路径都使用绝对路径，而不简单的使用相对路径。</p>
<p>1、绝对路径</p>
<p>2、base+相对</p>
<h3 id="5-8-web中-斜杠的不同意义"><a href="#5-8-web中-斜杠的不同意义" class="headerlink" title="5.8 web中/斜杠的不同意义"></a>5.8 web中/斜杠的不同意义</h3><p>在web中/斜杠是一种绝对路径。</p>
<p>①:/斜杠如果被<strong>浏览器</strong>解析，得到的地址是：</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">http://ip:port/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>②:/斜杠如果被<strong>服务器</strong>解析，得到的地址是:</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">http://ip:port/工程路径<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol>
<li>&lt;url-pattern&gt;/servlet1&lt;/url-pattern&gt;</li>
<li>servletContext.getRealPath(“/”);</li>
<li>request.getRequestDispatcher(“/”);</li>
</ol>
<p>特殊情况：response.sendRediect(“/”);把斜杠发送给浏览器解析。得到</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">http://ip:port/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="6-HttpServletResponse类"><a href="#6-HttpServletResponse类" class="headerlink" title="6.HttpServletResponse类"></a><a id="6">6.HttpServletResponse类</a></h2><h3 id="6-1-HttpServletResponse类的作用"><a href="#6-1-HttpServletResponse类的作用" class="headerlink" title="6.1 HttpServletResponse类的作用"></a>6.1 HttpServletResponse类的作用</h3><p>HttpServletResponse类和HttpServletRequest类一样。每次请求进来，<strong>Tomcat服务器都会创建一个Response对象传递给Servlet程序去使用</strong>。HttpServletRequest表示请求过来的信息，HttpServletResponse表示所有响应的信息，我们如果需要设置返回给客户端的信息，都可以通过HttpServletResponse对象来进行设置</p>
<h3 id="6-2-两个输出流的说明"><a href="#6-2-两个输出流的说明" class="headerlink" title="6.2 两个输出流的说明"></a>6.2 两个输出流的说明</h3><p>字节流  getOutputStream();   常用于下载（传递二进制数据）</p>
<p>字符流  getWriter();   常用于回传字符串（常用）</p>
<p>两个流同时只能使用一个。使用了字节流，就不能再使用字符流，反之亦然，否则就会报错。</p>
<h3 id="6-3-往客户端回传数据"><a href="#6-3-往客户端回传数据" class="headerlink" title="6.3 往客户端回传数据"></a>6.3 往客户端回传数据</h3><p><font color=red><strong>服务器(Tomcat)—–客户端(浏览器)</strong></font></p>
<ol>
<li>回传数据要解决的第一件事就是乱码问题</li>
</ol>
<p>①:</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//设置服务器字符集为UTF-8</span>
resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//通过响应头，设置浏览器也使用UTF-8字符集</span>
resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>②:</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//它会同时设置服务器和客户端都使用UTF-8字符集，还设置了响应头</span>
<span class="token comment">//此方法一定要在获取流对象之前调用才有效</span>
resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ol start="2">
<li>回传数据</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResponseIoServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"这是往客户端回传的数据~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525452.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525452.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110153912221"></p>
<h3 id="6-4-请求重定向"><a href="#6-4-请求重定向" class="headerlink" title="6.4 请求重定向"></a>6.4 请求重定向</h3><p>请求重定向,是指客户端给服务器发请求，然后服务器告诉客户端说。我给你一些地址。你去新地址访问。叫请求重定向（因为之前的地址可能已经被废弃）。</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525682.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231525682.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110154052946"></p>
<p>①:</p>
<p>//设置响应状态码302，表示重定向，（已搬迁）</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">resp<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">302</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>//设置响应头，说明新的地址在哪里</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Location"</span><span class="token punctuation">,</span><span class="token string">"http://localhost:8080"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>②:</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>案例:</p>
<p>Redirect</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Redirect</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/response"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526640.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526640.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110155410067"></p>
<h2 id="7-JSP-1"><a href="#7-JSP-1" class="headerlink" title="7.JSP"></a><a id="7">7.JSP</a></h2><p>JSP(全称JavaServerPages)是由Sun公司专门为了解决<strong>动态</strong>生成HTML文档的技术。</p>
<h3 id="7-1-JSP原理"><a href="#7-1-JSP原理" class="headerlink" title="7.1 JSP原理"></a>7.1 JSP原理</h3><p><strong>jsp的本质，其实是一个Servlet程序</strong></p>
<p>那么当我们访问一个xxx.jsp文件后翻译成java文件的全名是xxx_jsp.java文件xxx_jsp.java文件是一个Servlet程序。原来jsp中的html内容都被翻译到Servlet类的service方法中原样输出</p>
<h3 id="7-2-jsp的语法"><a href="#7-2-jsp的语法" class="headerlink" title="7.2 jsp的语法"></a>7.2 jsp的语法</h3><h4 id="7-2-1-jsp文件头部声明介绍（page指令介绍）"><a href="#7-2-1-jsp文件头部声明介绍（page指令介绍）" class="headerlink" title="7.2.1 jsp文件头部声明介绍（page指令介绍）"></a>7.2.1 jsp文件头部声明介绍（page指令介绍）</h4><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>这是jsp文件的头声明。表示这是jsp页面。</p>
<ul>
<li>language属性值只能是java。表示翻译的得到的是java语言的</li>
<li>contentType属性设置响应头contentType的内容</li>
<li>pageEncoding属性设置当前jsp页面的编码</li>
<li>import属性给当前jsp页面导入需要使用的类包</li>
<li>autoFlush属性设置是否自动刷新out的缓冲区，默认为true</li>
<li>buffer属性设置out的缓冲区大小。默认为8KB</li>
<li>errorPage属性设置当前jsp发生错误后，需要跳转到哪个页面去显示错误信息</li>
<li>isErrorPage属性设置当前jsp页面是否是错误页面。是的话，就可以使用exception异常对象</li>
<li>session属性设置当前jsp页面是否获取session对象,默认为true</li>
<li>extends属性给服务器厂商预留的jsp默认翻译的servlet继承于什么类</li>
</ul>
<h4 id="7-2-2-jsp中的三种脚本介绍"><a href="#7-2-2-jsp中的三种脚本介绍" class="headerlink" title="7.2.2 jsp中的三种脚本介绍"></a>7.2.2 jsp中的三种脚本介绍</h4><ul>
<li>声明脚本</li>
<li>表达式脚本:star:</li>
<li>代码脚本:star::star:</li>
</ul>
<p>①:声明脚本</p>
<p>格式:</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%!
    java代码
%&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>在声明脚本块中，我们可以干4件事情:</p>
<ul>
<li>我们可以<strong>定义</strong>全局变量。</li>
<li><strong>定义</strong>static静态代码块</li>
<li><strong>定义</strong>方法</li>
<li><strong>定义</strong>内部类</li>
</ul>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526836.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526836.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110184716759"></p>
<p>②:表达式脚本</p>
<p>格式:</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%&#x3D;表达式%&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>表达式脚本用于向页面<strong>输出内容</strong>。</p>
<p>表达式脚本翻译到Servlet程序的**service方法中以out.print()**打印输出out是jsp的一个内置对象，用于生成html的源代码</p>
<p>注意：表达式不要以分号结尾，否则会报错</p>
<p>表达式脚本可以输出任意类型</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526599.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526599.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110184920135"></p>
<p>③:代码脚本</p>
<p>格式:</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;% java代码 %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>代码脚本里可以书写<strong>任意的java语句</strong>。代码脚本的内容都会被翻译到<strong>service方法</strong>中。所以service方法中可以写的java代码，都可以书写到代码脚本中</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526784.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526784.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110185257250"></p>
<h4 id="7-2-3-jsp中的注释"><a href="#7-2-3-jsp中的注释" class="headerlink" title="7.2.3 jsp中的注释"></a>7.2.3 jsp中的注释</h4><ul>
<li><p>//单行java注释</p>
</li>
<li><p>/*<br>多行java代码注释<br>*/</p>
</li>
</ul>
<p>单行注释和多行注释能在翻译后的java源代码中看见</p>
<ul>
<li>&lt;%–jsp注释–%&gt;<br>jsp注释在翻译的时候会直接被忽略掉</li>
<li>&lt;!–html注释–&gt;<br>html的注释会被翻译到java代码中输出到html页面中查看</li>
</ul>
<h3 id="7-3-jsp九大内置对象"><a href="#7-3-jsp九大内置对象" class="headerlink" title="7.3 jsp九大内置对象"></a>7.3 jsp九大内置对象</h3><table>
<thead>
<tr>
<th>对象</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>request对象</td>
<td>请求对象，可以获取请求信息</td>
</tr>
<tr>
<td>response对象</td>
<td>响应对象。可以设置响应信息</td>
</tr>
<tr>
<td>pageContext对象</td>
<td>当前页面上下文对象。可以在当前上下文保存属性信息</td>
</tr>
<tr>
<td>session对象</td>
<td>会话对象。可以获取会话信息。</td>
</tr>
<tr>
<td>exception对象</td>
<td>异常对象只有在jsp页面的page指令中设置isErrorPage=”true”的时候才会存在</td>
</tr>
<tr>
<td>application对象</td>
<td>ServletContext对象实例，可以获取整个工程的一些信息</td>
</tr>
<tr>
<td>config对象</td>
<td>ServletConfig对象实例，可以获取Servlet的配置信息</td>
</tr>
<tr>
<td>out对象</td>
<td>输出流</td>
</tr>
<tr>
<td>page对象</td>
<td>表示当前Servlet对象实例（无用，用它不如使用this对象）</td>
</tr>
</tbody></table>
<p>九大内置对象，都是我们可以在【代码脚本】中或【表达式脚本】中<strong>直接使用</strong>的对象。</p>
<h3 id="7-4-jsp四大域对象"><a href="#7-4-jsp四大域对象" class="headerlink" title="7.4 jsp四大域对象"></a>7.4 jsp四大域对象</h3><h4 id="7-4-1-四大域对象经常用来保存数据信息"><a href="#7-4-1-四大域对象经常用来保存数据信息" class="headerlink" title="7.4.1 四大域对象经常用来保存数据信息"></a>7.4.1 四大域对象经常用来保存数据信息</h4><table>
<thead>
<tr>
<th>域对象</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>pageContext</td>
<td>可以保存数据在同一个jsp页面中使用</td>
</tr>
<tr>
<td>request</td>
<td>可以保存数据在同一个request对象中使用。经常用于在转发的时候传递数据</td>
</tr>
<tr>
<td>session</td>
<td>可以保存在一个会话中使用</td>
</tr>
<tr>
<td>application(ServletContext)</td>
<td>就是ServletContext对象</td>
</tr>
</tbody></table>
<h4 id="7-4-2-四个作用域的测试代码"><a href="#7-4-2-四个作用域的测试代码" class="headerlink" title="7.4.2 四个作用域的测试代码"></a>7.4.2 四个作用域的测试代码</h4><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Context1&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
        这是Context1的页面&lt;br&#x2F;&gt;
        &lt;%
            &#x2F;&#x2F;设置page域的数据
            pageContext.setAttribute(&quot;key&quot;,&quot;pageContext-value&quot;);
            &#x2F;&#x2F;设置request域的数据
            request.setAttribute(&quot;key&quot;,&quot;request-value&quot;);
            &#x2F;&#x2F;设置session域的数据
            session.setAttribute(&quot;key&quot;,&quot;session-value&quot;);
            &#x2F;&#x2F;设置application域的对象
            application.setAttribute(&quot;key&quot;,&quot;application-value&quot;);
        %&gt;
&lt;%--        测试当前作用域的页面--%&gt;
        &lt;%&#x3D;pageContext.getAttribute(&quot;key&quot;)%&gt;
        &lt;%&#x3D;request.getAttribute(&quot;key&quot;)%&gt;
        &lt;%&#x3D;session.getAttribute(&quot;key&quot;)%&gt;&gt;
        &lt;%&#x3D;application.getAttribute(&quot;key&quot;)%&gt;
        &lt;%
            &#x2F;&#x2F;测试request的作用域
            request.getRequestDispatcher(&quot;&#x2F;Context2.jsp&quot;).forward(request,response);
        %&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Context2.jsp&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
        这是Context2的页面&lt;br&#x2F;&gt;
        &lt;%&#x3D;pageContext.getAttribute(&quot;key&quot;)%&gt;&lt;br&#x2F;&gt;
        &lt;%&#x3D;request.getAttribute(&quot;key&quot;)%&gt;&lt;br&#x2F;&gt;
        &lt;%&#x3D;session.getAttribute(&quot;key&quot;)%&gt;&lt;br&#x2F;&gt;
        &lt;%&#x3D;application.getAttribute(&quot;key&quot;)%&gt;&lt;br&#x2F;&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p><strong>测试pageContext作用域步骤：</strong></p>
<p>直接访问context1.jsp文件</p>
</li>
</ul>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526322.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526322.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110195116169"></p>
<ul>
<li><p>测试request作用域步骤：<br>1.在context1.jsp文件中添加转发到context2.jsp（有数据）<br>2.直接访问context2.jsp文件（没有数据）</p>
</li>
<li><p>测试session作用域步骤：<br>1.访问完context1.jsp文件<br>2.关闭浏览器。但是要保持服务器一直开着3.打开浏览器，直接访问context2.jsp文件</p>
</li>
<li><p>测试application作用域步骤：<br>1.访问完context1.jsp文件，然后关闭浏览器<br>2.停止服务器。再启动服务器。<br>3.打开浏览器访问context2.jsp文件</p>
</li>
</ul>
<h3 id="7-5-jsp中out输出流和response-getwriter-输出流"><a href="#7-5-jsp中out输出流和response-getwriter-输出流" class="headerlink" title="7.5 jsp中out输出流和response.getwriter()输出流"></a>7.5 jsp中out输出流和response.getwriter()输出流</h3><h4 id="7-5-1-jsp中out和response的writer的区别演示"><a href="#7-5-1-jsp中out和response的writer的区别演示" class="headerlink" title="7.5.1 jsp中out和response的writer的区别演示"></a>7.5.1 jsp中out和response的writer的区别演示</h4><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;out和response.getwriter()&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
    &lt;%
        &#x2F;&#x2F;out输出
        out.write(&quot;这是out的第一次输出&lt;br&#x2F;&gt;&quot;);
        &#x2F;&#x2F;out flush之后,会把输出的内容写入writer的缓冲区中
        out.flush();
        &#x2F;&#x2F;最后一次的输出,由于没有手动flush,会在整个页面输出到客户端的时候,自动写入到writer缓冲区
        out.write(&quot;这是out的第二次输出&lt;br&#x2F;&gt;&quot;);
        &#x2F;&#x2F;writer的输出
        response.getWriter().write(&quot;这是writer的第一次输出&lt;br&#x2F;&gt;&quot;);
        response.getWriter().write(&quot;这是writer的第二次输出&lt;br&#x2F;&gt;&quot;);
    %&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526246.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526246.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110191918245"></p>
<h4 id="7-5-2-图解out流和writer流的两个缓冲区如何工作"><a href="#7-5-2-图解out流和writer流的两个缓冲区如何工作" class="headerlink" title="7.5.2 图解out流和writer流的两个缓冲区如何工作"></a>7.5.2 图解out流和writer流的两个缓冲区如何工作</h4><p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526743.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526743.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110192142472"></p>
<h3 id="7-6-jsp的常用标签"><a href="#7-6-jsp的常用标签" class="headerlink" title="7.6 jsp的常用标签"></a>7.6 jsp的常用标签</h3><ul>
<li>&lt;%–静态包含–%&gt;</li>
<li>&lt;%–动态包含–%&gt;</li>
<li>&lt;%–转发–%&gt;</li>
</ul>
<h4 id="7-6-1-静态包含-star-star"><a href="#7-6-1-静态包含-star-star" class="headerlink" title="7.6.1 静态包含:star::star:"></a>7.6.1 静态包含:star::star:</h4><p>&lt;%@includefile=””%&gt;</p>
<p>静态包含是把包含的页面内容原封装不动的输出到包含的位置。</p>
<h4 id="7-6-2-动态包含"><a href="#7-6-2-动态包含" class="headerlink" title="7.6.2 动态包含"></a>7.6.2 动态包含</h4><p>&lt;jsp:includepage=””&gt;&lt;/jsp:include&gt;</p>
<p>动态包含会把包含的jsp页面<strong>单独翻译</strong>成servlet文件，然后在执行到时候再调用翻译的servlet程序。并把计算的结果返回。动态包含是在执行的时候，才会加载。所以叫动态包含。</p>
<h4 id="7-6-3-页面转发-star"><a href="#7-6-3-页面转发-star" class="headerlink" title="7.6.3 页面转发:star:"></a>7.6.3 页面转发:star:</h4><p>&lt;jsp:forwardpage=””&gt;&lt;/jsp:forward&gt;</p>
<p>&lt;jsp:forward转发功能相当于</p>
<p><code>request.getRequestDispatcher(&quot;/xxxx.jsp&quot;).forward(request,response);</code></p>
<p>的功能。</p>
<h4 id="7-6-4-静态包含和动态包含的区别"><a href="#7-6-4-静态包含和动态包含的区别" class="headerlink" title="7.6.4 静态包含和动态包含的区别"></a>7.6.4 静态包含和动态包含的区别</h4><p><img src="C:\Users\郁孤台下清江水\AppData\Roaming\Typora\typora-user-images\image-20211110193136389.png" class="lazyload placeholder" data-srcset="C:\Users\郁孤台下清江水\AppData\Roaming\Typora\typora-user-images\image-20211110193136389.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110193136389"></p>
<h2 id="8-EL表达式"><a href="#8-EL表达式" class="headerlink" title="8.EL表达式"></a><a id="8">8.EL表达式</a></h2><h3 id="8-1-EL表达式"><a href="#8-1-EL表达式" class="headerlink" title="8.1 EL表达式"></a>8.1 EL表达式</h3><p>EL表达式的全称是：Expression                                        Language。是表达式语言。</p>
<p>EL表达式的什么作用：EL表达式主要是代替jsp页面中的表达式脚本在jsp页面中进行数据的输出。</p>
<p>因为EL表达式在输出数据的时候，要比jsp的表达式脚本要简洁很多。</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;body&gt;
    &lt;%
    request.setAttribute(&quot;key&quot;,&quot;值&quot;);
    %&gt;
    表达式脚本输出key的值是：&lt;%&#x3D;request.getAttribute(&quot;key1&quot;)&#x3D;&#x3D;null?&quot;&quot;:request.getAttribute(&quot;key1&quot;)%&gt;&lt;br&#x2F;&gt;
    EL表达式输出key的值是：$&#123;key1&#125;
&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>EL表达式的格式是：</p>
<p><strong><code>$&#123;表达式&#125;</code></strong></p>
<p>EL表达式在输出null值的时候，输出的是空串。jsp表达式脚本输出null值的时候，输出的是null字符串。</p>
<h3 id="8-2-EL表达式搜索域数据的顺序"><a href="#8-2-EL表达式搜索域数据的顺序" class="headerlink" title="8.2 EL表达式搜索域数据的顺序"></a>8.2 EL表达式搜索域数据的顺序</h3><p><strong>EL表达式主要是在jsp页面中输出数据</strong>。主要是<strong>输出域对象中的数据</strong>。当四个域中都有相同的key的数据的时候，EL表达式会按照四个域的<strong>从小到大的顺序</strong>去进行搜索，找到就输出。</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;
&lt;%@page isELIgnored&#x3D;&quot;false&quot;%&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
&lt;%&#x2F;&#x2F;往四个域中都保存了相同的key的数据。
  request.setAttribute(&quot;key&quot;,&quot;request&quot;);
  session.setAttribute(&quot;key&quot;,&quot;session&quot;);
  application.setAttribute(&quot;key&quot;,&quot;application&quot;);
  pageContext.setAttribute(&quot;key&quot;,&quot;pageContext&quot;);
%&gt;
$&#123;key&#125;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>注意:在jsp中，默认是禁用了EL表达式功能的，因此，如果我们直接使用${参数名}来获取参数的值的话，浏览器会解析成文本输出</strong></p>
<p><strong>有两种解决办法:</strong></p>
<ol>
<li><p>在jsp页面头部加入：</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@page isELIgnored&#x3D;&quot;false&quot;%&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>这样可以去掉jsp对EL表达式的禁用，现在我们就可以正常使用它了.</p>
</li>
<li><p>EL表达式只有<strong>在web版本在2.4以后才可以使用，默认情况下web.xml是2.3的。</strong><br>所以这时就需要自己手动去更换一个:</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd<span class="token punctuation">"</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3.1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

//同时这个也是最新的web-xml定义<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h3 id="8-3-EL表达式输出Bean的普通属性，数组属性。List集合属性，map集合属性"><a href="#8-3-EL表达式输出Bean的普通属性，数组属性。List集合属性，map集合属性" class="headerlink" title="8.3 EL表达式输出Bean的普通属性，数组属性。List集合属性，map集合属性"></a>8.3 EL表达式输出Bean的普通属性，数组属性。List集合属性，map集合属性</h3><p>需求——输出Person类中普通属性，数组属性。list集合属性和map集合属性。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//i.需求——输出Person类中普通属性，数组属性。list集合属性和map集合属性。</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span> 
    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> phones<span class="token punctuation">;</span> 
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> cities<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> map<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token number">18</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出的代码:</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;body&gt;  
    &lt;%
    	Person person&#x3D; new Person();
    	person.setName(&quot;国哥好帅！&quot;);
    	person.setPhones(new String[]&#123;&quot;18610541354&quot;,&quot;18688886666&quot;,&quot;18699998888&quot;&#125;);
   		 List&lt;String&gt; cities&#x3D;new ArrayList&lt;String&gt;();
   		 cities.add(&quot;北京&quot;);
   		 cities.add(&quot;上海&quot;);
   		 cities.add(&quot;深圳&quot;);
   		 person.setCities(cities);
   		 Map&lt;String,Object&gt;map&#x3D;new HashMap&lt;&gt;();
    	 map.put(&quot;key1&quot;,&quot;value1&quot;);
    	 map.put(&quot;key2&quot;,&quot;value2&quot;);
   	     map.put(&quot;key3&quot;,&quot;value3&quot;);
         person.setMap(map);
         pageContext.setAttribute(&quot;p&quot;,person);
   %&gt;
    	输出Person：$&#123;p&#125;&lt;br&#x2F;&gt;
    	输出Person的name属性：$&#123;p.name&#125;&lt;br&gt;
 		输出Person的pnones数组属性值：$&#123;p.phones[2]&#125;&lt;br&gt;
   		输出Person的cities集合中的元素值：$&#123;p.cities&#125;&lt;br&gt;
   		输出Person的List集合中个别元素值：$&#123;p.cities[2]&#125;&lt;br&gt;
   		输出Person的Map集合:$&#123;p.map&#125;&lt;br&gt;
   		输出Person的Map集合中某个key的值:$&#123;p.map.key3&#125;&lt;br&gt;
    	输出Person的age属性：$&#123;p.age&#125;&lt;br&gt;
&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="8-4-EL表达式–运算"><a href="#8-4-EL表达式–运算" class="headerlink" title="8.4 EL表达式–运算"></a>8.4 EL表达式–运算</h3><p>语法：<code>$&#123;运算表达式&#125;</code></p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526720.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231526720.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110213302353"></p>
<p><strong>4)empty运算</strong></p>
<p>empty运算可以判断一个数据是否为空，如果为空，则输出true,不为空输出false。以下几种情况为空：</p>
<ul>
<li>值为null值的时候，为空</li>
<li>值为空串的时候，为空</li>
<li>值是Object类型数组，长度为零的时候</li>
<li>list集合，元素个数为零</li>
<li>map集合，元素个数为零</li>
</ul>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;body&gt;
    &lt;%
    &#x2F;&#x2F;1、值为null值的时候，为空
    request.setAttribute(&quot;emptyNull&quot;,null);
    &#x2F;&#x2F;2、值为空串的时候，为空
    request.setAttribute(&quot;emptyStr&quot;,&quot;&quot;);
    &#x2F;&#x2F;3、值是Object类型数组，长度为零的时候
    request.setAttribute(&quot;emptyArr&quot;,new Object[]&#123;&#125;);
    &#x2F;&#x2F;4、list集合，元素个数为零
    List&lt;String&gt;list&#x3D;new ArrayList&lt;&gt;();
    &#x2F;&#x2F;list.add(&quot;abc&quot;);
    request.setAttribute(&quot;emptyList&quot;,list);
    &#x2F;&#x2F;5、map集合，元素个数为零
    Map &lt;String,Object&gt;map&#x3D;new HashMap&lt;String,Object&gt;();
    &#x2F;&#x2F;map.put(&quot;key1&quot;,&quot;value1&quot;);
    request.setAttribute(&quot;emptyMap&quot;,map);
    %&gt;
    $&#123;empty emptyNull&#125;&lt;br&#x2F;&gt;
    $&#123;empty emptyStr&#125;&lt;br&#x2F;&gt;
    $&#123;empty emptyArr&#125;&lt;br&#x2F;&gt;
    $&#123;empty emptyList&#125;&lt;br&#x2F;&gt;
    $&#123;empty emptyMap&#125;&lt;br&#x2F;&gt;
&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>5)三元运算</strong></p>
<p><code>表达式1？表达式2：表达式3</code></p>
<p>如果表达式1的值为真，返回表达式2的值，如果表达式1的值为假，返回表达式3的值。</p>
<p>示例：${12!=12?”国哥帅呆”:”国哥又骗人啦”}</p>
<p><strong>6)“.”点运算和[]中括号运算符</strong></p>
<p>.点运算，可以输出Bean对象中某个属性的值。</p>
<p>[]中括号运算，可以输出有序集合中某个元素的值。</p>
<p>并且[]中括号运算，还可以输出map集合中key里含有特殊字符的key的值</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;body&gt;
    &lt;% 
      Map&lt;String,Object&gt;map&#x3D;new HashMap&lt;String,Object&gt;();
      map.put(&quot;a.a.a&quot;,&quot;aaaValue&quot;);
      map.put(&quot;b+b+b&quot;,&quot;bbbValue&quot;);
      map.put(&quot;c-c-c&quot;,&quot;cccValue&quot;);
      request.setAttribute(&quot;map&quot;,map);
    %&gt;
    $&#123;map[&#39;a.a.a&#39;]&#125;&lt;br&gt;
    $&#123;map[&quot;b+b+b&quot;]&#125;&lt;br&gt;
    $&#123;map[&#39;c-c-c&#39;]&#125;&lt;br&gt;
&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="8-5-EL表达式的11个隐含对象"><a href="#8-5-EL表达式的11个隐含对象" class="headerlink" title="8.5 EL表达式的11个隐含对象"></a>8.5 EL表达式的11个隐含对象</h3><p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527630.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527630.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211110214147085"></p>
<h3 id="8-6-EL获取四个特定域中的属性"><a href="#8-6-EL获取四个特定域中的属性" class="headerlink" title="8.6 EL获取四个特定域中的属性"></a>8.6 EL获取四个特定域中的属性</h3><p>pageScope======pageContext域</p>
<p>requestScope======Request域</p>
<p>sessionScope======Session域</p>
<p>applicationScope======ServletContext域</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;body&gt;
 &lt;%
    pageContext.setAttribute(&quot;key1&quot;,&quot;pageContext1&quot;);
    pageContext.setAttribute(&quot;key2&quot;,&quot;pageContext2&quot;);
    request.setAttribute(&quot;key2&quot;,&quot;request&quot;);
    session.setAttribute(&quot;key2&quot;,&quot;session&quot;);
    application.setAttribute(&quot;key2&quot;,&quot;application&quot;);
%&gt;
    $&#123;applicationScope.key2&#125;
&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="8-7-pageContext对象的使用"><a href="#8-7-pageContext对象的使用" class="headerlink" title="8.7 pageContext对象的使用"></a>8.7 pageContext对象的使用</h3><p>1.协议：</p>
<p>2.服务器ip：</p>
<p>3.服务器端口：</p>
<p>4.获取工程路径：</p>
<p>5.获取请求方法：</p>
<p>6.获取客户端ip地址：</p>
<p>7.获取会话的id编号</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;body&gt;
    &lt;%--
    request.getScheme()它可以获取请求的协议
    request.getServerName()获取请求的服务器ip或域名
    request.getServerPort()获取请求的服务器端口号
    getContextPath()获取当前工程路径
    request.getMethod()获取请求的方式（GET或POST）
    request.getRemoteHost()获取客户端的ip地址
    session.getId()获取会话的唯一标识
    --%&gt;
    &lt;%
    	pageContext.setAttribute(&quot;req&quot;,request);
    %&gt;
    &lt;%&#x3D;request.getScheme()%&gt;&lt;br&gt;
    1.协议：$&#123;req.scheme&#125;&lt;br&gt;
    2.服务器ip：$&#123;pageContext.request.serverName&#125;&lt;br&gt;
    3.服务器端口：$&#123;pageContext.request.serverPort&#125;&lt;br&gt;
    4.获取工程路径：$&#123;pageContext.request.contextPath&#125;&lt;br&gt;
    5.获取请求方法：$&#123;pageContext.request.method&#125;&lt;br&gt;
    6.获取客户端ip地址：$&#123;pageContext.request.remoteHost&#125;&lt;br&gt;
    7.获取会话的id编号：$&#123;pageContext.session.id&#125;&lt;br&gt;
&lt;&#x2F;body&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="8-8-EL表达式其他隐含对象的使用"><a href="#8-8-EL表达式其他隐含对象的使用" class="headerlink" title="8.8 EL表达式其他隐含对象的使用"></a>8.8 EL表达式其他隐含对象的使用</h3><p>param                  Map&lt;String,String&gt;                         它可以获取请求参数的值    </p>
<p>paramValues       Map&lt;String,String[]&gt;                       它也可以获取请求参数的值，获取多个值的时候使用。</p>
<p>示例:</p>
<p>输出请求参数username的值：${param.username}&lt;br&gt;</p>
<p>输出请求参数password的值：${param.password}&lt;br&gt;</p>
<p>输出请求参数username的值：${paramValues.username[0]}&lt;br&gt;</p>
<p>输出请求参数hobby的值：${paramValues.hobby[0]}&lt;br&gt;</p>
<p>输出请求参数hobby的值：${paramValues.hobby[1]}&lt;br&gt;</p>
<hr>
<p>请求地址：</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">http://localhost:8080/09_EL_JSTL/other_el_obj.jsp?username=wzg168&amp;password=666666&amp;hobby=java&amp;hobby=cpp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>header                    Map&lt;String,String&gt;         它可以获取请求头的信息</p>
<p>headerValues         Map&lt;String,String[]&gt;        它可以获取请求头的信息，它可以获取多个值的情况</p>
<p>示例:</p>
<p>输出请求头【User-Agent】的值：${header[‘User-Agent’]}&lt;br&gt;</p>
<p>输出请求头【Connection】的值：${header.Connection}&lt;br&gt;</p>
<p>输出请求头【User-Agent】的值：${headerValues[‘User-Agent’][0]}&lt;br&gt;</p>
<hr>
<p>cookie        Map&lt;String,Cookie&gt;        它可以获取当前请求的Cookie信息</p>
<p>示例:</p>
<p>获取Cookie的名称：${cookie.JSESSIONID.name}&lt;br&gt;</p>
<p>获取Cookie的值：${cookie.JSESSIONID.value}&lt;br&gt;</p>
<hr>
<p>initParam        Map&lt;String,String&gt;        它可以获取在web.xml中配置的<context-param>上下文参数</p>
<p>web.xml中的配置:</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>url<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>jdbc:mysql:///test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>示例:</p>
<p>输出&lt;Context-param&gt;username的值：${initParam.username}&lt;br&gt;</p>
<p>输出&lt;Context-param&gt;url的值：${initParam.url}&lt;br&gt;</p>
<h2 id="9-JSTL标签库-1"><a href="#9-JSTL标签库-1" class="headerlink" title="9.JSTL标签库"></a><a id="9">9.JSTL标签库</a></h2><p>JSTL标签库全称是指JSP Standard Tag Library      JSP标准标签库。是一个不断完善的开放源代码的JSP标签库。</p>
<p><strong>EL表达式主要是为了替换jsp中的表达式脚本，而标签库则是为了替换代码脚本</strong>。这样使得整个jsp页面变得更佳简洁。</p>
<hr>
<p>JSTL由五个不同功能的标签库组成</p>
<table>
<thead>
<tr>
<th>功能范围</th>
<th>URI</th>
<th>前缀</th>
</tr>
</thead>
<tbody><tr>
<td>核心标签库–重点</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a></td>
<td>c</td>
</tr>
<tr>
<td>格式化</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/fmt">http://java.sun.com/jsp/jstl/fmt</a></td>
<td>fmt</td>
</tr>
<tr>
<td>函数</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/functions">http://java.sun.com/jsp/jstl/functions</a></td>
<td>fn</td>
</tr>
<tr>
<td>数据库(不使用)</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/sql">http://java.sun.com/jsp/jstl/sql</a></td>
<td>sql</td>
</tr>
<tr>
<td>XML(不使用)</td>
<td><a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/xml">http://java.sun.com/jsp/jstl/xml</a></td>
<td>x</td>
</tr>
</tbody></table>
<p>在jsp标签库中使用taglib指令引入标签库</p>
<p>CORE标签库</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">&lt;%@taglib prefix="c"uri="http://java.sun.com/jsp/jstl/core"%><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>XML标签库</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">&lt;%@taglib prefix="x"uri="http://java.sun.com/jsp/jstl/xml"%><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>FMT标签库</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">&lt;%@taglib prefix="fmt"uri="http://java.sun.com/jsp/jstl/fmt"%><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>SQL标签库</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">&lt;%@taglib prefix="sql"uri="http://java.sun.com/jsp/jstl/sql"%><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>FUNCTIONS标签库</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">&lt;%@taglib prefix="fn"uri="http://java.sun.com/jsp/jstl/functions"%><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="9-1-JSTL标签库的使用步骤"><a href="#9-1-JSTL标签库的使用步骤" class="headerlink" title="9.1 JSTL标签库的使用步骤"></a>9.1 JSTL标签库的使用步骤</h4><ol>
<li><p>在maven里导入jstl标签库的依赖</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--      jstl --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp.jstl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jstl-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!--jstl-impl(jstl的实现类)--></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.glassfish.web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jstl-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet.jsp.jstl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jstl-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在jsp中使用taglib指令引入标签库。</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@taglib prefix&#x3D;&quot;c&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;core&quot; %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<h4 id="9-2-core核心库使用"><a href="#9-2-core核心库使用" class="headerlink" title="9.2 core核心库使用"></a>9.2 core核心库使用</h4><h5 id="9-2-1-lt-c-set-gt-（使用很少）"><a href="#9-2-1-lt-c-set-gt-（使用很少）" class="headerlink" title="9.2.1 &lt;c:set/&gt;（使用很少）"></a>9.2.1 &lt;c:set/&gt;（使用很少）</h5><p>作用：set标签可以往域中保存数据</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%--
    i.&lt;c:set&#x2F;&gt;
        作用：set标签可以往域中保存数据
        域对象.setAttribute(key,value);
 scope属性设置保存到哪个域
    page表示PageContext域（默认值）
    request表示Request域
    session表示Session域
    application表示ServletContext域
 var属性设置key是多少
 value属性设置值
--%&gt;
保存之前：$&#123;sessionScope.abc&#125;&lt;br&gt;&lt;c:set scope&#x3D;&quot;session&quot; var&#x3D;&quot;abc&quot; value&#x3D;&quot;abcValue&quot;&#x2F;&gt;
保存之后：$&#123;sessionScope.abc&#125;&lt;br&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="9-2-2-lt-c-if-gt"><a href="#9-2-2-lt-c-if-gt" class="headerlink" title="9.2.2 &lt;c:if/&gt;"></a>9.2.2 &lt;c:if/&gt;</h5><p>if标签用来做if判断。</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%--
    ii.&lt;c:if&#x2F;&gt;
        if标签用来做if判断。
        test属性表示判断的条件（使用EL表达式输出）
--%&gt;
&lt;c:if test&#x3D;&quot;$&#123;12&#x3D;&#x3D;12&#125;&quot;&gt;
    &lt;h1&gt;12等于12&lt;&#x2F;h1&gt;
&lt;&#x2F;c:if&gt;
&lt;c:if test&#x3D;&quot;$&#123;12!&#x3D;12&#125;&quot;&gt;
    &lt;h1&gt;12不等于12&lt;&#x2F;h1&gt;
&lt;&#x2F;c:if&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="9-2-3-lt-c-choose-gt-lt-c-when-gt-lt-c-otherwise-gt-标签"><a href="#9-2-3-lt-c-choose-gt-lt-c-when-gt-lt-c-otherwise-gt-标签" class="headerlink" title="9.2.3 &lt;c:choose&gt;&lt;c:when&gt;&lt;c:otherwise&gt;标签"></a>9.2.3 &lt;c:choose&gt;&lt;c:when&gt;&lt;c:otherwise&gt;标签</h5><p>作用：多路判断。跟switch…case….default非常接近</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%--
    	iii.&lt;c:choose&gt;&lt;c:when&gt;&lt;c:otherwise&gt;标签
        作用：多路判断。跟switch...case....default非常接近
        choose标签开始选择判断
        when标签表示每一种判断情况
            test属性表示当前这种判断情况的值
        otherwise标签表示剩下的情况
        
        &lt;c:choose&gt;&lt;c:when&gt;&lt;c:otherwise&gt;标签使用时需要注意的点：
            1、标签里不能使用html注释，要使用jsp注释
            2、when标签的父标签一定要是choose标签--%&gt;&lt;%
request.setAttribute(&quot;height&quot;,180);
%&gt;
&lt;c:choose&gt;
    &lt;%--这是html注释--%&gt;&lt;c:when test&#x3D;&quot;$&#123;requestScope.height&gt;190&#125;&quot;&gt;
    &lt;h2&gt;小巨人&lt;&#x2F;h2&gt;
&lt;&#x2F;c:when&gt;
&lt;c:when test&#x3D;&quot;$&#123;requestScope.height&gt;180&#125;&quot;&gt;
        &lt;h2&gt;很高&lt;&#x2F;h2&gt;
&lt;&#x2F;c:when&gt;
&lt;c:when test&#x3D;&quot;$&#123;requestScope.height&gt;170&#125;&quot;&gt;
        &lt;h2&gt;还可以&lt;&#x2F;h2&gt;
&lt;&#x2F;c:when&gt;
 &lt;c:otherwise&gt;
    &lt;c:choose&gt;				           	                   &lt;c:when test&#x3D;&quot;$&#123;requestScope.height&gt;160&#125;&quot;&gt;
             &lt;h3&gt;大于160&lt;&#x2F;h3&gt;&lt;&#x2F;c:when&gt;                     &lt;c:when test&#x3D;&quot;$&#123;requestScope.height&gt;150&#125;&quot;   
             &lt;h3&gt;大于150&lt;&#x2F;h3&gt;
        &lt;&#x2F;c:when&gt;                                         &lt;c:when test&#x3D;&quot;$&#123;requestScope.height&gt;140&#125;&quot;&gt;
            &lt;h3&gt;大于140&lt;&#x2F;h3&gt;&lt;&#x2F;c:when&gt;
        &lt;c:otherwise&gt;
            其他小于140
        &lt;&#x2F;c:otherwise&gt;
    &lt;&#x2F;c:choose&gt;
 &lt;&#x2F;c:otherwise&gt;
&lt;&#x2F;c:choose&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="9-2-4-lt-c-forEach-gt"><a href="#9-2-4-lt-c-forEach-gt" class="headerlink" title="9.2.4 &lt;c:forEach/&gt;"></a>9.2.4 &lt;c:forEach/&gt;</h5><p>作用：遍历输出使用。</p>
<h6 id="9-2-4-1-遍历1到10，输出"><a href="#9-2-4-1-遍历1到10，输出" class="headerlink" title="9.2.4.1 遍历1到10，输出"></a>9.2.4.1 遍历1到10，输出</h6><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%--1.遍历1到10，输出
    begin属性设置开始的索引
    end属性设置结束的索引
    var属性表示循环的变量(也是当前正在遍历到的数据)
    for(int i&#x3D;1;i&lt;10;i++)
--%&gt;
&lt;table border&#x3D;&quot;1&quot;&gt;
    &lt;c:forEach begin&#x3D;&quot;1&quot; end&#x3D;&quot;10&quot; var&#x3D;&quot;i&quot;&gt;
        &lt;tr&gt;
            &lt;td&gt;第$&#123;i&#125;行&lt;&#x2F;td&gt;
        &lt;&#x2F;tr&gt;
    &lt;&#x2F;c:forEach&gt;
&lt;&#x2F;table&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="9-2-4-2-遍历Object数组"><a href="#9-2-4-2-遍历Object数组" class="headerlink" title="9.2.4.2 遍历Object数组"></a>9.2.4.2 遍历Object数组</h6><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%-- 2.遍历Object数组
    for (Object item:arr)
    items表示遍历的数据源（遍历的集合）
    var表示当前遍历到的数据
--%&gt;
&lt;%
	request.setAttribute(&quot;arr&quot;,new String[]&#123;&quot;18610541354&quot;,&quot;18688886666&quot;,&quot;18699998888&quot;&#125;);
%&gt;
&lt;c:forEach items&#x3D;&quot;$&#123;requestScope.arr&#125;&quot;var&#x3D;&quot;item&quot;&gt;
    $&#123;item&#125;&lt;br&gt;
&lt;&#x2F;c:forEach&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="9-2-4-3-遍历Map集合"><a href="#9-2-4-3-遍历Map集合" class="headerlink" title="9.2.4.3 遍历Map集合"></a>9.2.4.3 遍历Map集合</h6><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%
	Map&lt;String,Object&gt; map&#x3D;new HashMap&lt;String,Object&gt;();
	map.put(&quot;key1&quot;,&quot;value1&quot;);
	map.put(&quot;key2&quot;,&quot;value2&quot;);
	map.put(&quot;key3&quot;,&quot;value3&quot;);
		&#x2F;&#x2F;for(Map.Entry&lt;String,Object&gt;entry:map.entrySet())&#123;
		&#x2F;&#x2F;&#125;
	request.setAttribute(&quot;map&quot;,map);
%&gt;
 &lt;c:forEach items&#x3D;&quot;$&#123;requestScope.map&#125;&quot; var&#x3D;&quot;entry&quot;&gt;
     &lt;h1&gt;$&#123;entry.key&#125;&#x3D;$&#123;entry.value&#125;&lt;&#x2F;h1&gt;
&lt;&#x2F;c:forEach&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h6 id="9-2-4-4-遍历List集合—list中存放Student类，有属性：编号，用户名，密码，年龄，电话信息"><a href="#9-2-4-4-遍历List集合—list中存放Student类，有属性：编号，用户名，密码，年龄，电话信息" class="headerlink" title="9.2.4.4 遍历List集合—list中存放Student类，有属性：编号，用户名，密码，年龄，电话信息"></a>9.2.4.4 遍历List集合—list中存放Student类，有属性：编号，用户名，密码，年龄，电话信息</h6><p>Student类:</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//4.编号，用户名，密码，年龄，电话信息</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span> 
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span> 
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span> 
    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>示例代码:</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%-- 4.遍历List集合---list中存放Student类，有属性：编号，用户名，密码，年龄，电话信息 --%&gt;
&lt;%
	List &lt;Student&gt; studentList&#x3D; new ArrayList&lt;Student&gt;();
	for(int i&#x3D;1;i&lt;&#x3D;10;i++)&#123;
    	studentList.add(new Student(i,&quot;username&quot;+i,&quot;pass&quot;+i,18+i,&quot;phone&quot;+i));
	&#125;
	request.setAttribute(&quot;stus&quot;,studentList);
%&gt;
&lt;table&gt;
    &lt;tr&gt;
        &lt;th&gt;编号&lt;&#x2F;th&gt;
        &lt;th&gt;用户名&lt;&#x2F;th&gt;
        &lt;th&gt;密码&lt;&#x2F;th&gt;
        &lt;th&gt;年龄&lt;&#x2F;th&gt;
        &lt;th&gt;电话&lt;&#x2F;th&gt;
        &lt;th&gt;操作&lt;&#x2F;th&gt;
    &lt;&#x2F;tr&gt;
    &lt;%--
    	items 表示遍历的集合 
    	var表示遍历到的数据
    	begin表示遍历的开始索引值
    	end表示结束的索引值
    	step属性表示遍历的步长值
    	varStatus属性表示当前遍历到的数据的状态
    	for（int i&#x3D;1;i&lt;10;i+&#x3D;2）
    --%&gt;
&lt;c:forEach begin&#x3D;&quot;2&quot; end&#x3D;&quot;7&quot; step&#x3D;&quot;2&quot; varStatus&#x3D;&quot;status&quot; items&#x3D;&quot;$&#123;requestScope.stus&#125;&quot; var&#x3D;&quot;stu&quot;&gt;
    &lt;tr&gt;
        &lt;td&gt;$&#123;stu.id&#125;&lt;&#x2F;td&gt;
        &lt;td&gt;$&#123;stu.username&#125;&lt;&#x2F;td&gt;
        &lt;td&gt;$&#123;stu.password&#125;&lt;&#x2F;td&gt;
        &lt;td&gt;$&#123;stu.age&#125;&lt;&#x2F;td&gt;
        &lt;td&gt;$&#123;stu.phone&#125;&lt;&#x2F;td&gt;
        &lt;td&gt;$&#123;status.step&#125;&lt;&#x2F;td&gt;
    &lt;&#x2F;tr&gt;
&lt;&#x2F;c:forEach&gt;
&lt;&#x2F;table&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="10-JSON-1"><a href="#10-JSON-1" class="headerlink" title="10.JSON"></a><a id="10">10.JSON</a></h2><p>JSON(JavaScript  Object  Notation)是一种轻量级的<strong>数据交换格式</strong>。易于人阅读和编写。同时也易于机器解析和生成。它基于JavaScript  Programming  Language,Standard  ECMA-262  3rd  Edition - December 1999的一个子集。JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C,C++,C#,Java,JavaScript,Perl,Python等）。这些特性使JSON成为理想的数据交换语言</p>
<h3 id="10-1-JSON对象定义和基本使用"><a href="#10-1-JSON对象定义和基本使用" class="headerlink" title="10.1 JSON对象定义和基本使用"></a>10.1 JSON对象定义和基本使用</h3><p>在标准的json格式中，json对象由在括号括起来，对象中的属性也就是json的key是一个字符串，所以一定要使用双引号引起来。每组key之间使用逗号进行分隔。</p>
<h4 id="10-1-1-JSON的引用"><a href="#10-1-1-JSON的引用" class="headerlink" title="10.1.1 JSON的引用"></a>10.1.1 JSON的引用</h4><p>Json定义格式：</p>
<p><code>var 变量名 = &#123;</code></p>
<p>​     <code> “key” : value,  //Number类型</code></p>
<p>​     <code> “key2” : “value” ,     //字符串类型</code></p>
<p>​     <code> “key3” : [] ,     //数组类型</code></p>
<p>​     <code> “key4” : &#123; &#125; ,      //json对象类型</code></p>
<p>​     <code>“key5” : [ &#123; &#125; , &#123; &#125; ]             //json数组</code></p>
<p><code>&#125;;</code></p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json">var jsons = <span class="token punctuation">&#123;</span>
    <span class="token property">"key1"</span><span class="token operator">:</span><span class="token string">"abc"</span><span class="token punctuation">,</span> <span class="token comment">//字符串类型</span>
    <span class="token property">"key2"</span><span class="token operator">:</span><span class="token number">1234</span><span class="token punctuation">,</span>  <span class="token comment">//Number</span>
    <span class="token property">"key3"</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1234</span><span class="token punctuation">,</span><span class="token string">"21341"</span><span class="token punctuation">,</span><span class="token string">"53"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//数组</span>
    <span class="token property">"key4"</span> <span class="token operator">:</span> <span class="token punctuation">&#123;</span>   <span class="token comment">//json类型"</span>
        key4_1"<span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span>
        <span class="token property">"key4_2"</span><span class="token operator">:</span><span class="token string">"kkk"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"key5"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>       <span class="token comment">//json数组</span>
        <span class="token property">"key5_1_1"</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span>
        <span class="token property">"key5_1_2"</span><span class="token operator">:</span><span class="token string">"abc"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
        <span class="token property">"key5_2_1"</span><span class="token operator">:</span><span class="token number">41</span><span class="token punctuation">,</span>
        <span class="token property">"key5_2_2"</span><span class="token operator">:</span><span class="token string">"bbj"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="10-1-2-JSON对象的访问"><a href="#10-1-2-JSON对象的访问" class="headerlink" title="10.1.2 JSON对象的访问"></a>10.1.2 JSON对象的访问</h4><p>json对象，顾名思义，就知道它是一个对象。里面的key就是对象的属性。我们要访问一个对象的属性，只需要使用【<code>对象名.属性名</code>】的方式访问即可。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>
    <span class="token comment">//json的定义</span>
    <span class="token keyword">var</span> jsons <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token string-property property">"key1"</span><span class="token operator">:</span><span class="token string">"abc"</span><span class="token punctuation">,</span>  <span class="token comment">//字符串类型</span>
        <span class="token string-property property">"key2"</span><span class="token operator">:</span><span class="token number">1234</span><span class="token punctuation">,</span><span class="token comment">//Number</span>
        <span class="token string-property property">"key3"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1234</span><span class="token punctuation">,</span><span class="token string">"21341"</span><span class="token punctuation">,</span><span class="token string">"53"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//数组</span>
        <span class="token string-property property">"key4"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>   <span class="token comment">//json类型</span>
            <span class="token string-property property">"key4_1"</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span>
            <span class="token string-property property">"key4_2"</span><span class="token operator">:</span><span class="token string">"kkk"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token string-property property">"key5"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>    <span class="token comment">//json数组</span>
            <span class="token string-property property">"key5_1_1"</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span>
            <span class="token string-property property">"key5_1_2"</span><span class="token operator">:</span><span class="token string">"abc"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
            <span class="token string-property property">"key5_2_1"</span><span class="token operator">:</span><span class="token number">41</span><span class="token punctuation">,</span>
            <span class="token string-property property">"key5_2_2"</span><span class="token operator">:</span><span class="token string">"bbj"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token comment">//访问json的属性</span>
	<span class="token function">alert</span> <span class="token punctuation">(</span>jsons<span class="token punctuation">.</span>key1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//"abc"</span>
    <span class="token comment">//访问json的数组属性</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>jsons<span class="token punctuation">.</span>key3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"21341"</span>
	<span class="token comment">//访问json的json属性</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>jsons<span class="token punctuation">.</span>key4<span class="token punctuation">.</span>key4_1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//12</span>
	<span class="token comment">//访问json的json数组</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>jsons<span class="token punctuation">.</span>key5<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>key5_1_2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"abc"</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="10-2-JSON中两个常用的方法"><a href="#10-2-JSON中两个常用的方法" class="headerlink" title="10.2 JSON中两个常用的方法"></a>10.2 JSON中两个常用的方法</h3><p>JSON对象和字符串对象的互转</p>
<ul>
<li><p>一般我们要操作JSON中的数据的时候,需要JSON对象格式 </p>
</li>
<li><p>一般我们要在客户端和服务器之间进行数据交换的时候,使用JSON字符串</p>
</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">//此方法可以把一个json对象转换成为json字符串</span>

JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token comment">//此方法可以把一个json字符串转换成为json对象</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">></span>
    <span class="token comment">//一个json对象</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span><span class="token punctuation">&#123;</span>
        <span class="token string-property property">"a"</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span>
        <span class="token string-property property">"c"</span><span class="token operator">:</span><span class="token string">"str"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token comment">//把json对象转换成为字符串对象</span>
	<span class="token keyword">var</span> objStr <span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>objStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//把json对象的字符串，转换成为json对象</span>
	<span class="token keyword">var</span> jsonObj<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>objStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="10-3-JSON在java中的使用"><a href="#10-3-JSON在java中的使用" class="headerlink" title="10.3 JSON在java中的使用"></a>10.3 JSON在java中的使用</h3><p>Gson是Google提供的用来在Java对象和JSON数据之间进行映射的Java类库。可以将一个JSON<strong>字符串</strong>转成一个Java对象，或者反过来。</p>
<p>json在java中的操作。常见的有三种情况</p>
<ul>
<li>java对象和json的转换</li>
<li>java对象list集合和json的转换</li>
<li>map对象和json的转换</li>
</ul>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GsonTest</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span> 
        <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token comment">//TODO Auto-generated constructor stub</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
       <span class="token comment">//省略getter,setter,toString</span>
        
    <span class="token comment">//要把复杂的json字符串转换成为java对象。需要继承TypeToken类。</span>
    <span class="token comment">//并把返回的类型当成TypeToken的泛型注入</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">PersonType</span> <span class="token keyword">extends</span> <span class="token class-name">TypeToken</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>    
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span>args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//json操作，一定要先new一个gson对象。</span>
        <span class="token class-name">Gson</span> gson<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//java对象--json</span>
        <span class="token class-name">Person</span> person<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">"wzg168"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//把对象转成为json字符串</span>
        <span class="token class-name">String</span> personjson <span class="token operator">=</span>gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>personjson<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//把json字符串转换成为java对象</span>
        <span class="token class-name">Person</span> p<span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>personjson<span class="token punctuation">,</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2、java对象list集合和json的转换</span>
        <span class="token class-name">List</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span>i<span class="token punctuation">,</span><span class="token string">"name-"</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>
        <span class="token class-name">String</span> jsonListString <span class="token operator">=</span>gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonListString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//把json数组转换成为List对象</span>
        <span class="token comment">//List&lt;Person> ps=gson.fromJson(jsonListString,new PersonType().getType());</span>
        <span class="token comment">//我们也可以使用匿名内部类</span>
        <span class="token class-name">List</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> ps<span class="token operator">=</span>gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonListString<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">TypeToken</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3、map对象和json的转换</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> mapPerson<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">GsonTest<span class="token punctuation">.</span>Person</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//添加person到map中</span>
        mapPerson<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"p1"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"person-1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapPerson<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"p2"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"person-2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//把map转换成为json对象</span>
        <span class="token class-name">String</span> jsonMapString<span class="token operator">=</span>gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>mapPerson<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonMapString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//通过使用匿名内部类的方式</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Person</span><span class="token punctuation">></span></span>map<span class="token operator">=</span>gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonMapString<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">TypeToken</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HashMap</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Person</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="11-AJAX-1"><a href="#11-AJAX-1" class="headerlink" title="11.AJAX"></a><a id="11">11.AJAX</a></h2><p>AJAX即“Asynchronous  Javascript  And  XML”（异步JavaScript和XML），是指一种创建交互式网页应用的网页开发技术。</p>
<p>ajax是一种浏览器异步发起请求。局部更新页面的技术</p>
<h3 id="11-1-javaScript原生Ajax请求"><a href="#11-1-javaScript原生Ajax请求" class="headerlink" title="11.1 javaScript原生Ajax请求"></a>11.1 javaScript原生Ajax请求</h3><p>原生的Ajax请求，</p>
<ol>
<li>我们首先要创建XMLHttpRequest对象</li>
<li>调用open方法设置请求参数</li>
<li>调用send方法发送请求</li>
<li>在send方法前绑定onreadystatechange事件，处理请求完成后的操作。</li>
</ol>
<p>1）创建一个html页面，发起请求。代码如下：</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span><span class="token name">htmlPUBLIC</span><span class="token string">"-//W3C//DTDHTML4.01Transitional//EN"</span>
<span class="token string">"http://www.w3.org/TR/html4/loose.dtd"</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
        &lt;metahttp-equiv="pragma"content="no-cache"/>
        &lt;metahttp-equiv="cache-control"content="no-cache"/>
        &lt;metahttp-equiv="Expires"content="0"/>&lt;metahttp-equiv="Content-Type"content="text/html;charset=UTF-8">
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Inserttitlehere<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
        &lt;scripttype="text/javascript"><span class="token script"><span class="token language-javascript">
            <span class="token keyword">function</span> <span class="token function">ajaxRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token comment">//1、我们首先要创建XMLHttpRequest</span>
            <span class="token keyword">var</span> xhr<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//2、调用open方法设置请求参数</span>
            xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"ajaxServlet?action=javaScriptAjax&amp;a="</span><span class="token operator">+</span><span class="token function">newDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//4、在send方法前绑定onreadystatechange事件，处理请求完成后的操作。</span>
            xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token comment">//判断请求完成，并且成功</span>
            	<span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span><span class="token operator">&amp;&amp;</span>xhr<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"div01"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
            	 <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token comment">//3、调用send方法发送请求xhr.send();</span>
            <span class="token punctuation">&#125;</span>
            </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">ajaxRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span> ajaxrequest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>div01<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>2）创建一个AjaxServlet程序接收请求</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AjaxServlet</span> <span class="token keyword">extends</span> <span class="token class-name">BaseServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID<span class="token operator">=</span><span class="token number">1L</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> javaScriptAjax <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span>
    <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ajax请求过来了a--"</span><span class="token operator">+</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Random</span> random<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//使用随机数，可以让客户端看到变化</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token function">newGson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GsonTest<span class="token punctuation">.</span>Person</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"12312"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>3）在web.xml文件中的配置：</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>AjaxServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>
        com.atguigu.servlet.AjaxServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>AjaxServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/ajaxServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>3）测试效果</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527908.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527908.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211117144110762"></p>
<p>通过上面的代码我们发现。编写原生的JavaScript我们自己要写很多的代码。而且还要考虑浏览器兼容问题。所以使用起来非常的不方便。那我们工作之后。怎么处理Ajax请求呢。我们一般会使用JavaScript的框架来解决这个问题，比如说我们前面学到的Jquery框架。它就有很好的Ajax解决方案。</p>
<h3 id="11-2-JQuery的Ajax请求-star-star"><a href="#11-2-JQuery的Ajax请求-star-star" class="headerlink" title="11.2 JQuery的Ajax请求:star::star:"></a>11.2 JQuery的Ajax请求:star::star:</h3><p>四个Ajax请求方法</p>
<ul>
<li>$.ajax方法</li>
<li>$.get方法</li>
<li>$.post方法</li>
<li>$.getJSON方法</li>
<li>一个表单序列化方法：serialize()表单序列化方法</li>
</ul>
<hr>
<p><strong>如何使用上面的五个方法：</strong></p>
<p>在JQuery中和Ajax请求有关的方法有四个</p>
<p><font color=red><strong>$.ajax请求参数</strong></font></p>
<p>url：请求的地址</p>
<p>type:    请求的方式        get或post</p>
<p>data:    请求的参数        string或json</p>
<p>success:        成功的回调函数</p>
<p>dataType:    返回的数据类型        常用json或text</p>
<p>下面的方法必须遵守参数的顺序</p>
<p><font color=red><strong>$.get请求和$.post请求</strong></font></p>
<p>url:    请求的URL地址</p>
<p>data:    待发送Key/value参数。</p>
<p>callback:    载入成功时回调函数。</p>
<p>type:    返回内容格式，xml,html,script,json,text。</p>
<p><font color=red><strong>Jquery的$.getJSON</strong></font></p>
<p>url:        待载入页面的URL地址</p>
<p>data:        待发送Key/value参数。</p>
<p>callback:        载入成功时回调函数。</p>
<p>表单的序列化serialize()方法可以把一个form表单中所有的表单项。都以字符串name=value&amp;name=value的形式进行拼接，省去我们很多不必要的工作。</p>
<p>由于$.get、$.post和getJSON这三个方法的底层都是直接或者间接地使用$.ajax()方法来实现的异步请求的调用。所以我们以$.ajax()方法的使用为示例进行展示：</p>
<h2 id="12-Cookie-1"><a href="#12-Cookie-1" class="headerlink" title="12 .Cookie"></a><a id="12">12 .Cookie</a></h2><h3 id="12-1-Cookie基本概念"><a href="#12-1-Cookie基本概念" class="headerlink" title="12.1 Cookie基本概念"></a>12.1 Cookie基本概念</h3><ul>
<li>Cookie翻译过来是饼干的意思。</li>
<li>Cookie是服务器通知客户端保存<strong>键值对</strong>的一种技术。</li>
<li>客户端有了Cookie后，每次请求都发送给服务器。</li>
<li>每个Cookie的大小不能超过4kb</li>
</ul>
<h3 id="12-2-如何创建Cookie"><a href="#12-2-如何创建Cookie" class="headerlink" title="12.2 如何创建Cookie"></a>12.2 如何创建Cookie</h3><p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527180.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527180.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211117112848220"></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Cookie</span> cookie<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//构造函数---创建Cookie对象</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">addCookie</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie<span class="token punctuation">)</span>  
<span class="token comment">//HttpServletResponse类的成员变量-----通知客户端保存Cookie</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<hr>
<p><strong>Servlet程序</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> createCookie <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//1创建Cookie对象</span>
    <span class="token class-name">Cookie</span> cookie<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"key4"</span><span class="token punctuation">,</span><span class="token string">"value4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2通知客户端保存Cookie</span>
    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//1创建Cookie对象</span>
    <span class="token class-name">Cookie</span> cookie1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"key5"</span><span class="token punctuation">,</span><span class="token string">"value5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2通知客户端保存Cookie</span>
    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Cookie创建成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="12-3-服务器获取Cookie"><a href="#12-3-服务器获取Cookie" class="headerlink" title="12.3 服务器获取Cookie"></a>12.3 服务器获取Cookie</h3><p>只需要一行代码即可</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//HttpServletRequest类的成员变量,返回一个数组</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527041.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527041.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211117114419172"></p>
<hr>
<p><strong>Cookie的工具类</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CookieUtils</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
    *查找指定名称的Cookie对象
    *@paramname
    *@paramcookies
    *@return
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Cookie</span> findCookie <span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Cookie</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> cookies<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">||</span>cookies<span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">||</span>cookies<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie<span class="token operator">:</span>cookies<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> cookie<span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>Servlet程序中的代码</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> getCookie <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie<span class="token operator">:</span>cookies<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//getName方法返回Cookie的key（名）</span>
        <span class="token comment">//getValue方法返回Cookie的value值</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Cookie["</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"="</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"]&lt;br/>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token class-name">Cookie</span> iWantCookie<span class="token operator">=</span><span class="token class-name">CookieUtils</span><span class="token punctuation">.</span><span class="token function">findCookie</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span>cookies<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// for(Cookiecookie:cookies)&#123;</span>
     <span class="token comment">//   if("key2".equals(cookie.getName()))&#123;</span>
       <span class="token comment">//     iWantCookie=cookie;</span>
         <span class="token comment">//   break;</span>
        <span class="token comment">//&#125;</span>
   <span class="token comment">// &#125;</span>
    <span class="token comment">//如果不等于null，说明赋过值，也就是找到了需要的Cookie</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>iWantCookie<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"找到了需要的Cookie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="12-4-修改Cookie值"><a href="#12-4-修改Cookie值" class="headerlink" title="12.4 修改Cookie值"></a>12.4 修改Cookie值</h3><h4 id="12-4-1-方案一"><a href="#12-4-1-方案一" class="headerlink" title="12.4.1 方案一"></a>12.4.1 方案一</h4><ol>
<li>先创建一个要修改的同名（指的就是key）的Cookie对象</li>
<li>在构造器，同时赋于新的Cookie值。</li>
<li>调用response.addCookie(Cookie);</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//方案一：</span>
<span class="token comment">//1、先创建一个要修改的同名的Cookie对象</span>
<span class="token comment">//2、在构造器，同时赋于新的Cookie值。</span>
<span class="token class-name">Cookie</span> cookie<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span><span class="token string">"newValue1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3、调用response.addCookie(Cookie);通知客户端保存修改</span>
resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="12-4-2-方案二"><a href="#12-4-2-方案二" class="headerlink" title="12.4.2 方案二"></a>12.4.2 方案二</h4><ol>
<li>先查找到需要修改的Cookie对象</li>
<li>调用setValue()方法赋于新的Cookie值。</li>
<li>调用response.addCookie()通知客户端保存修改</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//方案二：</span>
<span class="token comment">//1、先查找到需要修改的Cookie对象</span>
<span class="token class-name">Cookie</span> cookie<span class="token operator">=</span><span class="token class-name">CookieUtils</span><span class="token punctuation">.</span><span class="token function">findCookie</span><span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span>req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>cookie<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">//2、调用setValue()方法赋于新的Cookie值。</span>
    cookie<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">"newValue2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3、调用response.addCookie()通知客户端保存修改</span>
    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="12-5-浏览器查看Cookie"><a href="#12-5-浏览器查看Cookie" class="headerlink" title="12.5 浏览器查看Cookie"></a>12.5 浏览器查看Cookie</h3><p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527721.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527721.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211117120211189"></p>
<h3 id="12-6-Cookie生命控制"><a href="#12-6-Cookie生命控制" class="headerlink" title="12.6 Cookie生命控制"></a>12.6 Cookie生命控制</h3><p>Cookie的生命控制指的是如何管理Cookie什么时候被销毁（删除）</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> expiry<span class="token punctuation">)</span> 
<span class="token comment">//Cookie的成员方法</span>
    expiry<span class="token operator">:</span>指定cookie 的最大生存时间（以秒为单位）的整数 
     正数，表示在指定的秒数后过期
     负数，表示浏览器一关，<span class="token class-name">Cookie</span>就会被删除（默认值是<span class="token operator">-</span><span class="token number">1</span>）
     零，表示马上删除<span class="token class-name">Cookie</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//设置存活1个小时的Cooie</span>

<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">life3600</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span> 
    <span class="token class-name">Cookie</span> cookie<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"life3600"</span><span class="token punctuation">,</span><span class="token string">"life3600"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置Cookie一小时之后被删除。无效</span>
    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"已经创建了一个存活一小时的Cookie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//马上删除一个Cookie</span>

<span class="token keyword">protected</span> <span class="token keyword">void</span> deleteNow <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//先找到你要删除的Cookie对象</span>
    <span class="token class-name">Cookie</span> cookie<span class="token operator">=</span><span class="token class-name">CookieUtils</span><span class="token punctuation">.</span><span class="token function">findCookie</span><span class="token punctuation">(</span><span class="token string">"key4"</span><span class="token punctuation">,</span>req<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cookie<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//调用setMaxAge(0);</span>
        cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示马上删除，都不需要等待浏览器关闭</span>
        <span class="token comment">//调用response.addCookie(cookie);</span>
        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"key4的Cookie已经被删除"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//默认的会话级别的Cookie</span>

<span class="token keyword">protected</span> <span class="token keyword">void</span> defaultLife <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Cookie</span> cookie<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"defalutLife"</span><span class="token punctuation">,</span><span class="token string">"defaultLife"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置存活时间</span>
    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="12-7-Cookie有效路径Path的设置"><a href="#12-7-Cookie有效路径Path的设置" class="headerlink" title="12.7 Cookie有效路径Path的设置"></a>12.7 Cookie有效路径Path的设置</h3><p>Cookie的path属性可以有效的过滤哪些Cookie可以发送给服务器。哪些不发。</p>
<p>path属性是通过请求的地址来进行有效的过滤。</p>
<p>CookieApath=/工程路径</p>
<p>CookieBpath=/工程路径/abc</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">请求地址如下：
	http://ip:port/工程路径/a.html
		CookieA发送
		CookieB不发送

    http://ip:port/工程路径/abc/a.html
		CookieA发送
		CookieB发送<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">testPath</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Cookie</span> cookie<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"path1"</span><span class="token punctuation">,</span><span class="token string">"path1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//getContextPath()===>>>>得到工程路径</span>
    cookie<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//===>>>>/工程路径/abc</span>
    resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"创建了一个带有Path路径的Cookie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="12-8-Cookie练习—免输入用户名登录"><a href="#12-8-Cookie练习—免输入用户名登录" class="headerlink" title="12.8 Cookie练习—免输入用户名登录"></a>12.8 Cookie练习—免输入用户名登录</h3><p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527958.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231527958.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211117122151344"></p>
<p>login.jsp页面</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;form action&#x3D;&quot;http:&#x2F;&#x2F;localhost:8080&#x2F;13_cookie_session&#x2F;loginServlet&quot; method&#x3D;&quot;get&quot;&gt;
    用户名：&lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;cookie.username.value&#125;&quot;&gt;&lt;br&gt;
    密码：&lt;input type&#x3D;&quot;password&quot; name&#x3D;&quot;password&quot;&gt;&lt;br&gt;
    &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;登录&quot;&gt;
&lt;&#x2F;form&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>LoginServlet程序：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> doGet <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">String</span> username<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> password<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"wzg168"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//登录成功</span>
        <span class="token class-name">Cookie</span> cookie<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当前Cookie一周内有效</span>
        resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"登录成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//登录失败</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"登录失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="13-Session-1"><a href="#13-Session-1" class="headerlink" title="13.Session"></a><a id="13">13.Session</a></h2><h3 id="13-1-Session概念"><a href="#13-1-Session概念" class="headerlink" title="13.1 Session概念"></a>13.1 Session概念</h3><ul>
<li>Session就一个接口（HttpSession）。</li>
<li>Session就是会话。它是用来维护一个客户端和服务器之间关联的一种技术。</li>
<li>每个客户端都有自己的一个Session会话。</li>
<li>Session会话中，我们经常用来保存用户登录之后的信息。</li>
</ul>
<h3 id="13-2-创建Session和获取-id号-是否为新"><a href="#13-2-创建Session和获取-id号-是否为新" class="headerlink" title="13.2 创建Session和获取(id号,是否为新)"></a>13.2 创建Session和获取(id号,是否为新)</h3><p>如何创建和获取Session。它们的API是一样的。</p>
<p><strong><code>request.getSession()</code></strong></p>
<p>​    第一次调用是：创建Session会话</p>
<p>   之后调用都是：获取前面创建好的Session会话对象</p>
<p>isNew();  判断到底是不是刚创建出来的（新的）</p>
<p>​    true表示刚创建</p>
<p>​    false表示获取之前创建</p>
<p>每个会话都有一个身份证号。也就是ID值。而且这个ID是唯一的。getId()得到Session的会话id值。</p>
<h3 id="13-3-Session域数据的存取"><a href="#13-3-Session域数据的存取" class="headerlink" title="13.3 Session域数据的存取"></a>13.3 Session域数据的存取</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 往Session中保存数据</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> setAttribute <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span><span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"已经往Session中保存了数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//获取Session域中的数据</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> getAttribute <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Object</span> attribute<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"从Session中获取出key1的数据是："</span><span class="token operator">+</span>attribute<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="13-4-Session生命周期控制"><a href="#13-4-Session生命周期控制" class="headerlink" title="13.4 Session生命周期控制"></a>13.4 Session生命周期控制</h3><p><strong><code>public void setMaxInactiveInterval (int interval)</code></strong></p>
<p>设置Session的超时时间（以秒为单位），超过指定的时长，Session就会被销毁。</p>
<p>​        值为正数的时候，设定Session的超时时长。</p>
<p>​        负数表示永不超时（极少使用）</p>
<p><strong><code>public int getMaxInactiveInterval()</code></strong> 获取Session的超时时间</p>
<p><strong><code>public void invalidate()</code></strong> 让当前Session会话马上超时无效。</p>
<p>Session默认的超时时长是多少！</p>
<p>Session默认的超时时间长为30分钟。</p>
<p>因为在Tomcat服务器的配置文件web.xml中默认有以下的配置，它就表示配置了当前Tomcat服务器下所有的Session超时配置默认时长为：30分钟。</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">></span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>如果说。你希望你的web工程，默认的Session的超时时长为其他时长。你可以在你自己的web.xml配置文件中做以上相同的配置。就可以修改你的web工程所有Seession的默认超时时长</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--表示当前web工程。创建出来的所有Session默认是20分钟超时时长--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">></span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>如果你想只修改个别Session的超时时长。就可以使用上面的API。setMaxInactiveInterval(int interval)来进行单独的设置。</p>
<p>session.setMaxInactiveInterval(int interval)单独设置超时时长。</p>
<p>Session超时的概念介绍：</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231528927.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231528927.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211117141622180"></p>
<p>示例代码:</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">life3</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//先获取Session对象</span>
    <span class="token class-name">HttpSession</span> session<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置当前Session3秒后超时</span>
    session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"当前Session已经设置为3秒后超时"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Session马上被超时示例：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">deleteNow</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span><span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span><span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//先获取Session对象</span>
    <span class="token class-name">HttpSession</span> session<span class="token operator">=</span>req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//让Session会话马上超时</span>
    session<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Session已经设置为超时（无效）"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="13-5-浏览器和Session之间关联的技术内幕"><a href="#13-5-浏览器和Session之间关联的技术内幕" class="headerlink" title="13.5  浏览器和Session之间关联的技术内幕"></a>13.5  浏览器和Session之间关联的技术内幕</h3><p>Session技术，底层其实是基于Cookie技术来实现的。</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231528344.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231528344.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211117141942527"></p>
<h2 id="14-Filter过滤器-1"><a href="#14-Filter过滤器-1" class="headerlink" title="14.Filter过滤器"></a><a id="14">14.Filter过滤器</a></h2><h3 id="14-1-概念"><a href="#14-1-概念" class="headerlink" title="14.1 概念"></a>14.1 概念</h3><ol>
<li>Filter过滤器是JavaWeb的三大组件之一。三大组件分别是：Servlet程序、Listener监听器、Filter过滤器</li>
<li>Filter过滤器它是JavaEE的规范。也就是接口</li>
<li>Filter过滤器它的作用是：<strong>拦截请求</strong>，过滤响应</li>
</ol>
<h3 id="14-2-Filter初体验"><a href="#14-2-Filter初体验" class="headerlink" title="14.2 Filter初体验"></a>14.2 Filter初体验</h3><p><strong>要求</strong>：在你的web工程下，有一个admin目录。这个admin目录下的所有资源（html页面、jpg图片、jsp文件、等等）都必须是用户登录之后才允许访问。</p>
<p><strong>思考</strong>：根据之前我们学过内容。我们知道，<strong>用户登录之后都会把用户登录的信息保存到Session域中。所以要检查用户是否登录，可以判断Session中否包含有用户登录的信息即可</strong>！！！</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%
     Object user &#x3D; session.getAttribute(&quot;user&quot;);
	&#x2F;&#x2F;如果等于null，说明还没有登录
	if(user&#x3D;&#x3D;null)&#123;
        request.getRequestDispatcher(&quot;&#x2F;login.jsp&quot;).forward(request,response);
        return;
    &#125;
%&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>Filter的工作流程图：</strong></p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231528771.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231528771.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211127171003702"></p>
<hr>
<p><strong>Filter过滤器的使用步骤：</strong></p>
<ol>
<li><p>编写一个类去**实现(implement)**Filter接口</p>
</li>
<li><p><strong>实现过滤方法doFilter()(作用:放行,让符合条件的通过)</strong></p>
</li>
<li><p>到web.xml中去配置Filter的拦截路径(或者在类中使用注解:@WebFilter (filterName=”…”,urlPatterns=”….”)</p>
<p> filterName          String        指定过滤器的name属性，等价于&lt;filter-name&gt;</p>
<p> urlPatterns        String[]       指定过滤器的URL匹配模式，等价于&lt;url-pattern&gt;)</p>
</li>
</ol>
<hr>
<p><strong>1.编写一个类去实现Filter接口,实现过滤方法doFilter()</strong></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span> 
    <span class="token comment">/**
    *doFilter方法，专门用于拦截请求。可以做权限检查
    */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> doFilter <span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span><span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span><span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span><span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">HttpServletRequest</span> httpServletRequest<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> servletRequest<span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session<span class="token operator">=</span> httpServletRequest<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> user<span class="token operator">=</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//如果等于null，说明还没有登录</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>user<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            servletRequest<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
            <span class="token comment">//让程序继续往下访问用户的目标资源</span>
            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>2.web.xml中的配置：</strong></p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--filter标签用于配置一个Filter过滤器--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--给filter起一个别名--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--配置filter的全类名--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>com.atguigu.filter.AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>


<span class="token comment">&lt;!--filter-mapping配置Filter过滤器的拦截路径--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--filter-name表示当前的拦截路径给哪个filter使用--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--url-pattern配置拦截路径/表示请求地址为：http://ip:port/工程路径/映射到IDEA的web目录/admin/*表示请求地址为：http://ip:port/工程路径/admin/*--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/admin/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="14-3-Filter的生命周期"><a href="#14-3-Filter的生命周期" class="headerlink" title="14.3 Filter的生命周期"></a>14.3 Filter的生命周期</h3><p>Filter的生命周期包含几个方法</p>
<ol>
<li>构造器方法</li>
<li>init初始化方法</li>
</ol>
<p>第1，2步，在web工程启动的时候执行（Filter已经创建）</p>
<ol start="3">
<li>doFilter过滤方法第3步，每次拦截到请求，就会执行</li>
<li>destroy销毁</li>
</ol>
<p>第4步，停止web工程的时候，就会执行（停止web工程，也会销毁Filter过滤器）</p>
<h3 id="14-4-FilterConfig类"><a href="#14-4-FilterConfig类" class="headerlink" title="14.4 FilterConfig类"></a>14.4 FilterConfig类</h3><p>FilterConfig类见名知义，它是Filter过滤器的<strong>配置文件类(要在web.xml里面配置)<strong>。</strong>Tomcat每次创建Filter的时候，也会同时创建一个FilterConfig类</strong>，这里包含了Filter配置文件的配置信息。</p>
<p>FilterConfig类的作用是获取filter过滤器的配置内容</p>
<ol>
<li>获取Filter的名称filter-name的内容</li>
<li>获取在Filter中配置的init-param初始化参数</li>
<li>获取ServletContext对象</li>
</ol>
<hr>
<ul>
<li>获取Filter的名称filter-name的内容</li>
</ul>
<p><code>filterConfig.getFilterName()</code></p>
<ul>
<li>获取在web.xml中配置的init-param初始化参数</li>
</ul>
<p><code>filterConfig.getInitParameter(&quot;username&quot;)</code></p>
<ul>
<li>获取ServletContext对象 </li>
</ul>
<p><code>filterConfig.getServletContext()</code></p>
<hr>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--filter标签用于配置一个Filter过滤器--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--给filter起一个别名--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--配置filter的全类名--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>com.atguigu.filter.AdminFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>url<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>jdbc:mysql://localhost3306/test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="14-5-FilterChain过滤器链"><a href="#14-5-FilterChain过滤器链" class="headerlink" title="14.5 FilterChain过滤器链"></a>14.5 FilterChain过滤器链</h3><p>Filter过滤器</p>
<p>Chain链，链条</p>
<p>FilterChain就是过滤器链（多个过滤器如何一起工作）</p>
<p><img src="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231528526.png" class="lazyload placeholder" data-srcset="https://gy-blog.oss-cn-beijing.aliyuncs.com/pic/202210231528526.png" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="image-20211127174342592"></p>
<h3 id="14-6-Filter的拦截路径"><a href="#14-6-Filter的拦截路径" class="headerlink" title="14.6 Filter的拦截路径"></a>14.6 Filter的拦截路径</h3><p><strong>–精确匹配</strong></p>
<p>&lt;url-pattern&gt;/target.jsp&lt;/url-pattern&gt;</p>
<p>以上配置的路径，表示请求地址必须为</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">http://ip:port/工程路径/target.jsp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>–目录匹配</strong></p>
<p>&lt;url-pattern&gt;/admin/*&lt;/url-pattern&gt;*</p>
<p>以上配置的路径，表示请求地址必须为</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">http://ip:port/工程路径/admin/*<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>–后缀名匹配</strong></p>
<p>&lt;url-pattern&gt;*.html&lt;/url-pattern&gt;*</p>
<p>以上配置的路径，表示请求地址必须以.html结尾才会拦截到</p>
<p>&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;</p>
<p>以上配置的路径，表示请求地址必须以.do结尾才会拦截到&lt;url-pattern&gt;*.action&lt;/url-pattern&gt;</p>
<p>以上配置的路径，表示请求地址必须以.action结尾才会拦截到</p>
<p>Filter过滤器它只关心请求的地址是否匹配，不关心请求的资源是否存在！！！</p>
<h3 id="14-7-重要"><a href="#14-7-重要" class="headerlink" title="14.7 重要"></a>14.7 重要</h3><h4 id="14-7-1-过滤谁-传到哪去"><a href="#14-7-1-过滤谁-传到哪去" class="headerlink" title="14.7.1 过滤谁?传到哪去"></a>14.7.1 过滤谁?传到哪去</h4><h4 id="14-7-2-当有多个过滤器时-执行的顺序"><a href="#14-7-2-当有多个过滤器时-执行的顺序" class="headerlink" title="14.7.2 当有多个过滤器时,执行的顺序"></a>14.7.2 当有多个过滤器时,执行的顺序</h4><h2 id="15-Listener监听器-1"><a href="#15-Listener监听器-1" class="headerlink" title="15.Listener监听器"></a><a id="15">15.Listener监听器</a></h2><h2 id="16-文件上传下载-1"><a href="#16-文件上传下载-1" class="headerlink" title="16. 文件上传下载"></a><a id="16">16. 文件上传下载</a></h2><h2 id="17-数据库连接池-1"><a href="#17-数据库连接池-1" class="headerlink" title="17.数据库连接池"></a><a id="17">17.数据库连接池</a></h2>
      </div>
      <div class="post-tags-categories">
        
        <div class="tags">
          
            <a href="/tags/JavaWeb/" class="">
              JavaWeb
            </a>
          
        </div>
        
      </div>
      
        <div class="copyright">
  <ul class="post-copyright">
    <li class="post-copyright-author">
    <strong>作者:  </strong>高小天</a>
    </li>
    <li class="post-copyright-link">
    <strong>文章链接:  </strong>
    <a href="/2021/09/18/javaWeb/" target="_blank" title="JavaWeb">https://gaoyang.world/2021/09/18/javaWeb/</a>
    </li>
    <li class="post-copyright-license">
      <strong>版权声明:   </strong>
      本网站所有文章除特别声明外,均采用 <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
      许可协议。转载请注明出处!
    </li>
  </ul>
<div>
      
    </article>
    <!-- 上一篇文章和下一篇文章 -->
    
      <!-- 文章详情页的上一页和下一页 -->
<div class="post-nav">



  
  <div class="post-nav-prev post-nav-item">
    <div class="post-nav-img" style="background-size: cover; 
      background-position: center center;">
      <img class="lazyload lazyload placeholder" src="/medias/7.jpg" class="lazyload placeholder" data-srcset="/medias/7.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="">
    </div>
    <a href="/2021/09/27/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AF%A6%E8%A7%A3(%E9%99%84%E6%BA%90%E7%A0%81)/" class="post-nav-link">
      <div class="title">
        <i class="fas fa-angle-left"></i> 上一篇:
        <div class="title-text">多线程知识点详解</div>
      </div>
      
      <!-- <div class="content">
        多线程知识点详解(附源码)
即使再小的帆也能远航~

一 、目录 多线程概念Thread类创建线程的三种方式线程的生命周
      </div> -->
    </a>
  </div>



  
  <div class="post-nav-next post-nav-item">
    <div class="post-nav-img" style="background-size: cover; 
      background-position: center center;">
      <img class="lazyload lazyload placeholder" src="/medias/1.jpg" class="lazyload placeholder" data-srcset="/medias/1.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" src="" alt="">
    </div>
    <a href="/2021/09/17/%E9%85%92%E5%90%8E%E7%9C%9F%E8%A8%80/" class="post-nav-link">
      <div class="title">
        下一篇: <i class="fas fa-angle-right"></i>
        <div class="title-text">酒后吐真言</div>
      </div>
      <!-- <div class="content">
        美国最大的论坛 Reddit，最近有一个热帖
一个程序员说自己喝醉了，软件工程师已经当了10年，心里有好多话想说，”我可
      </div> -->
    </a>
  </div>

</div>

    
    

    <!-- 打赏 -->
    
      <div id="appDonate" class="post-donate">
  <div id="donate_board" class="donate_bar center" ref="donate">
    <a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏" @click="showDialogDrawer()"></a>
  </div>
  <transition name="fade">
    <div 
      class="donate-box-mask"
      v-cloak 
      v-show="visible"
      @click="cancelDialogDrawer()"
    >
    </div>
  </transition>
  <transition name="bounce">
    <div class="donate-box" v-cloak v-show="visible">
      <div class="donate-box_close">
        <i class="fas fa-times" aria-hidden="true" @click="cancelDialogDrawer" pointer></i>
      </div>
      <div class="donate-box_title">
        <h4>
          你的赏识是我前进的动力
        </h4>
      </div>
      <div class="donate-box_tab">
        <div class="Alipay" pointer :class="{'active': tabActive === 'Alipay'}" @click="changeTabActive('Alipay')">
          支付宝
        </div>
        <div class="WeChatpay" pointer :class="{'active': tabActive === 'WeChatpay'}" @click="changeTabActive('WeChatpay')">
          微信
        </div>
      </div>
      <div class="donate-box_img">
        <div class="AlipayImg" v-show="tabActive === 'Alipay'">
          <img src="/medias/zfb.jpg" class="lazyload placeholder" data-srcset="/medias/zfb.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="支付宝打赏" />
        </div> 
        <div class="WeChatpayImg" v-show="tabActive === 'WeChatpay'">
          <img src="/medias/wx.jpg" class="lazyload placeholder" data-srcset="/medias/wx.jpg" srcset="https://img2.baidu.com/it/u=2037979560,2772131037&fm=26&fmt=auto&gp=0.jpg" alt="微信打赏" />
        </div>
      </div>
    </div>
  </transition>
</div>

<script>
  var body = document.body || document.documentElement || window;
  var vm = new Vue({
    el: '#appDonate',
    data: {
      visible: false,
      tabActive: 'Alipay',
      top: 0,
    },
    computed: {
    },
    mounted() {
    },
    methods: {
      showDialogDrawer() {
        this.visible = true;
        // 防止页面滚动，只能让弹框滚动
        // function getScroll() {
        //   return {
        //     left: window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0,
        //     top: window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0
        //   };
        // }
        this.top = $(document).scrollTop() // or getScroll().top
        // console.log('aa', $('.main-content'));
        body.style.cssText = 'overflow: hidden;';
      },
      cancelDialogDrawer() {
        this.visible = false;
        body.removeAttribute('style');
        $(document).scrollTop(this.top)
      },
      changeTabActive(name) {
        this.tabActive = name;
      }
    },
    created() {}
  })
</script>
    

    <!-- 分享 -->
    
      <!-- https://github.com/overtrue/share.js -->
<!-- 文章详情页的分享 -->
<div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>

<script src="/js/shareJs/social-share.min.js"></script>
</script>

<style>
  .social-share {
    margin: 20px 0;
  }
</style>


    
    
    <!-- 评论 -->
    <!-- 评论 -->

  <div id="myComment">
    
      <div id="gitment-container"></div>

    
  </div>

<!-- comment script in themes\hexo-theme-bamboo\layout\_partial\scripts\index.ejs -->


  </div>

  <!-- 目录 -->
  <!-- 文章详情页右侧目录 -->


<script>
  function closeToc(init) {
    $(".toc-aside").css({'width': 0, 'padding': 0, 'transition': init ?  'noe' : 'width 0.3s' });
    $(".toc-content").css({'width': 0});
    $(".toc-aside-title span, .toc-aside-title i").css({'display': 'none'});
    $(".main-content").css({'width': '75%', 'margin': '10px auto'});
  };
  function openToc() {
    $(".main-content").css({'width': '65%', 'margin-right': '10px', 'margin-left': 'calc(35% - 350px)'});
    $(".toc-aside").css({'width': '300px', 'padding': '0 10px', 'transition': 'width 0.3s'});
    $(".toc-content").css({'width': '300px'});
    $(".toc-aside-title span, .toc-aside-title i").css({'display': 'inline-block'});
  }
  function openBtnClickFn () {
    let openOrCloseBtn = $('.toc-aside .toc-aside-title .toc-open-close');
    let open = eval('false' || 'true');
    openOrCloseBtn.click(function() {
      if (open) {
        closeToc();
        open = false;
      } else {
        openToc();
        open = true;
      }
    });
  };
  openBtnClickFn();
  initCloseTocWidth(true);

  function initCloseTocWidth(init) {
    if (window.innerWidth >= 992) {
      let isClose = true;
      isClose && closeToc(init)
    }
  }

  document.addEventListener('pjax:complete', function () {
    $(".toc-aside").css({'transition': 'no'});
  })
  document.addEventListener('pjax:complete', function () {
    openBtnClickFn();
  })
  
</script>

  <!-- 图片放大 Wrap images with fancybox support -->
  <script src="/js/wrapImage.js"></script>
</div>

<!-- 文章详情页背景图 -->
<div id="appBgSwiper" style="position: fixed;left: 0;top: 0;width: 100%;height: 100%;z-index: -2;"
	:style="{'background-color': bgColor ? bgColor : 'transparent'}">
	<transition-group tag="ul" :name="names">
		<li v-for='(image,index) in img' :key='index' v-show="index === mark" class="bg-swiper-box">
			<img :src="image" class="bg-swiper-img no-lazy">
		</li>
	</transition-group>
</div>
<script>
	var vm = new Vue({
		el: '#appBgSwiper',
		data: {
			names: '' || 'fade' || 'fade', // translate-fade fade
			mark: 0,
			img: [],
			bgColor: '',
			time: null
		},
		methods: {   //添加方法
			change(i, m) {
				if (i > m) {
					// this.names = 'fade';
				} else if (i < m) {
					// this.names = 'fade';
				} else {
					return;
				}
				this.mark = i;
			},
			prev() {
				// this.names = 'fade';
				this.mark--;
				if (this.mark === -1) {
					this.mark = 3;
					return
				}
			},
			next() {
				// this.names = 'fade';
				this.mark++;
				if (this.mark === this.img.length) {
					this.mark = 0;
					return
				}
			},
			autoPlay() {
				// this.names = 'fade';
				this.mark++;
				if (this.mark === this.img.length) {
					this.mark = 0;
					return
				}
			},
			play() {
				let bgImgDelay = '' || '180000'
				let delay = parseInt(bgImgDelay) || 180000;
				this.time = setInterval(this.autoPlay, delay);
			},
			enter() {
				clearInterval(this.time);
			},
			leave() {
				this.play();
			}
		},
		created() {
			this.play()
		},
		beforeDestroy() {
			clearInterval(this.time);
		},
		mounted() {
			let prop = '' || '';
			let isImg = prop.includes('.bmp') || prop.includes('.jpg') || prop.includes('.png') || prop.includes('.tif') || prop.includes('.gif') || prop.includes('.pcx') || prop.includes('.tga') || prop.includes('.exif') || prop.includes('.fpx') || prop.includes('.psd') || prop.includes('.cdr') || prop.includes('.pcd') || prop.includes('.dxf') || prop.includes('.ufo') || prop.includes('.eps') || prop.includes('.ai') || prop.includes('.raw') || prop.includes('.WMF') || prop.includes('.webp') || prop.includes('.jpeg') || prop.includes('http://') || prop.includes('https://')
			if (isImg) {
				let img = prop.split(',');
				let configRoot = '/'
				let arrImg = [];
				img.forEach(el => {
					var Expression = /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;
					var objExp = new RegExp(Expression);

					if (objExp.test(el)) {
						// http or https
						arrImg.push(el);
					} else {
						// 非http or https开头
						// 本地文件
						let firstStr = el.charAt(0);
						if (firstStr == '/') {
							el = el.substr(1); // 删除第一个字符 '/',因为 configRoot最后一个字符为 /
						}
						el = configRoot + el;
						arrImg.push(el);
					}
				})
				this.img = arrImg;
			} else {
				this.bgColor = prop;
			}
		}
	})
</script>

<style>
	.bg-swiper-box {
		position: absolute;
		display: block;
		width: 100%;
		height: 100%;
	}

	.bg-swiper-img {
		object-fit: cover;
		width: 100%;
		height: 100%;
	}
</style>




  <script>
  function loadMermaid() {
    if (document.getElementsByClassName('mermaid').length) {
      if (window.mermaidJsLoad) mermaid.init()
      else {
        loadScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
          window.mermaidJsLoad = true
          mermaid.initialize({
            theme: 'default',
          })
          if ('true') {
            mermaid.init();
          }
        })
      }
    }
  };
  document.addEventListener("DOMContentLoaded", function () {
    loadMermaid();
  })

  document.addEventListener('pjax:complete', function () {
    loadMermaid();
  })
  
</script>


      </main>
    </div>

    <!-- 页脚 -->
    
  
  <div class="footer bg-color">
    <div class="footer-main">
      
        
          <div class="link">
            
          </div>
        
      
        
          <div class="footer-copyright">
            <p>Copyright © 2019 - 2020  </p>

          </div>
        
      
        
          
            <!-- 不蒜子统计 -->
            <!-- 不蒜子统计 -->
<span id="busuanzi_container_site_pv">
      <i class="fas fa-eye" aria-hidden="true"></i>本站总访问量：<span id="busuanzi_value_site_pv"></span> 次
</span>
<span class="post-meta-divider">|</span>
<span id="busuanzi_container_site_uv" style='display:none'>
      <i class="fas fa-users" aria-hidden="true"></i>本站访客数：<span id="busuanzi_value_site_uv"></span> 人
</span>

          
        
      
        
          <div class="footer-custom">
            
          </div>
        
      
    </div>
  </div>



    <!-- 渲染暗黑按钮 -->
    
      <div class="dark">
  <div class="dark-content">
    <i class="fas fa-moon" aria-hidden="true"></i>
    <!-- <span>关灯</span> -->
  </div>
  
</div>

<script>
  $(function() {
    let isDark = JSON.parse(localStorage.getItem('dark'))  || JSON.parse('false');
    if (isDark) {
      $(".dark-content").replaceWith(
          `
          <div class='dark-content'>
            <i class="fas fa-lightbulb" aria-hidden="true"></i>
          </div>
          `
        );
    }
    $('.dark').click(function() {
      if ($(document.body).is('.darkModel')) {
        $(document.body).removeClass('darkModel');
        localStorage.setItem('dark', false);
        $(".dark-content").replaceWith(
          `
          <div class='dark-content'>
            <i class="fas fa-moon" aria-hidden="true"></i>
          </div>
          `
        );
      } else {
        $(document.body).addClass('darkModel');
        localStorage.setItem('dark', true);
        $(".dark-content").replaceWith(
          `
          <div class='dark-content'>
            <i class="fas fa-lightbulb" aria-hidden="true"></i>
          </div>
          `
        );
      }
    })
  })
</script>
    
    <!-- 渲染回到顶部按钮 -->
    
      <div class="goTop top-btn-color" pointer>
  <i class="fas fa-arrow-up" aria-hidden="true"></i>
</div>
<script src="/js/goTop.js"></script>

    
    <!-- 渲染左下角音乐播放器 -->
    
      <link rel="stylesheet" href="/js/aplayer/APlayer@1.10.1.min.css">
<style>
.aplayer .aplayer-lrc p {
  
  font-size: 12px;
  font-weight: 700;
  line-height: 16px !important;
}

.aplayer .aplayer-lrc p.aplayer-lrc-current {
  
  font-size: 15px;
  color: #42b983;
}


.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
  left: -66px !important;
}

.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
  left: 0px !important;
}


</style>
<meting-js  
  class=""
  server="tencent"
  type="playlist"
  id="8062553743"
  fixed='true'
  autoplay='false'
  theme='#42b983'
  loop='all'
  order='random'
  preload='auto'
  volume='0.7'
  list-folded='true'
>
</meting-js>

<!-- <style>
  #aplayer {
    position: fixed;
    left: 0;
    bottom: 300px;
  }
</style> -->
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
    

    <!-- 图片放大 -->
    
      <script src="/js/fancybox/jquery.fancybox.min.js"></script>
    

    <!-- 百度解析 -->
    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <!-- 背景彩带 -->
    
      <script type="text/javascript" size="100" alpha='0.4' zIndex="-1" src="/js/ribbon.min.js"></script>
    

    <script src="/js/utils/index.js"></script>
    <script src="/js/app.js"></script>
    
    <!-- 文章目录所需js -->
<link href="/js/tocbot/tocbot.css" rel="stylesheet">
<script src="/js/tocbot/tocbot.min.js"></script>

<script>
  var headerEl = 'h2, h3, h4',  //headers 
    content = '.post-detail',//文章容器
    idArr = {};  //标题数组以确定是否增加索引id
  //add #id
  var option = {
    // Where to render the table of contents.
    tocSelector: '.toc',
    // Where to grab the headings to build the table of contents.
    contentSelector: content,
    // Which headings to grab inside of the contentSelector element.
    headingSelector: headerEl,
    scrollSmooth: true,
    scrollSmoothOffset: -80,
    headingsOffset: -($(window).height() * 0.4 - 45),
    positionFixedSelector: '.toc-main',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    activeLinkClass: 'is-active-link',
    // onClick: function (e) {},
  }
  if ($('.toc').length > 0) {

    $(content).children(headerEl).each(function () {
      //去除空格以及多余标点
      var headerId = $(this).text().replace(/[\s|\~|`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\_|\+|\=|\||\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\.|\>|\/|\?|\：|\，|\。]/g, '');

      headerId = headerId.toLowerCase();
      if (idArr[headerId]) {
        //id已经存在
        $(this).attr('id', headerId + '-' + idArr[headerId]);
        idArr[headerId]++;
      }
      else {
        //id未存在
        idArr[headerId] = 1;
        $(this).attr('id', headerId);
      }
    });

    document.addEventListener("DOMContentLoaded", function () {
      tocbot.init(option);
      mobileTocClick();
    });

  }

  window.tocScrollFn = function () {
    return bamboo.throttle(function () {
      findHeadPosition();
    }, 100)()
  }
  window.addEventListener('scroll', tocScrollFn);

  const findHeadPosition = function (top) {
    if ($('.toc-list').length <= 0) {
      return false;
    }
    setTimeout(() => {  // or DOMContentLoaded 
      autoScrollToc();
    }, 0);
  }

  const autoScrollToc = function () {
    const $activeItem = document.querySelector('.is-active-link');
    const $cardToc = document.querySelector('.toc-content');
    const activePosition = $activeItem.getBoundingClientRect().top
    const sidebarScrollTop = $cardToc.scrollTop
    if (activePosition > (document.documentElement.clientHeight - 100)) {
      $cardToc.scrollTop = sidebarScrollTop + 150
    }
    if (activePosition < 100) {
      $cardToc.scrollTop = sidebarScrollTop - 150
    }
  }

  document.addEventListener('pjax:send', function () {
    if ($('.toc').length) {
      tocbot.destroy();
    }
  });

  document.addEventListener('pjax:complete', function () {
    if ($('.toc').length) {
      tocbot.init(option);
      mobileTocClick();
    }
  });
  
  // 手机端toc按钮点击出现目录
  const mobileTocClick = function () {
    const $cardTocLayout = document.getElementsByClassName('toc-aside')[0];
    const $cardToc = $cardTocLayout.getElementsByClassName('toc-content')[0];
    let right = '45px';
    if (window.innerWidth >= 551 && window.innerWidth <= 992) {
      right = '100px'
    }
    const mobileToc = {
      open: () => {
        $cardTocLayout.style.cssText = 'animation: toc-open .3s; opacity: 1; right: ' + right
      },

      close: () => {
        $cardTocLayout.style.animation = 'toc-close .2s'
        setTimeout(() => {
          $cardTocLayout.style.cssText = "opacity:''; animation: ''; right: ''"
        }, 100)
      }
    }
    document.getElementById('toc-mobile-btn').addEventListener('click', () => {
      if (window.getComputedStyle($cardTocLayout).getPropertyValue('opacity') === '0') mobileToc.open()
      else mobileToc.close()
    })

    $cardToc.addEventListener('click', (e) => {
      if (window.innerWidth < 992) { // 小于992px的时候
        mobileToc.close()
      }
    })
  }
</script>

<style>
  .is-position-fixed {
    position: sticky !important;
    top: 74px;
  }

  .toc-main ul {
    counter-reset: show-list;
  }

  .toc-main ul li::before {
    content: counter(item)".";
    display: block;
    position: absolute;
    left: 12px;
    top: 0;
  }
</style> 

<!-- 设置导航背景 -->
<script>
  let setHeaderClass = () => {
    const headerMenuTransparent = true;
    if (!headerMenuTransparent) { return; }
    const nav = $('#navHeader');
    const navTop = nav.outerHeight();
    const winTop = $(window).scrollTop();
    if(winTop > navTop) {
      nav.addClass('header-bg-color');
    }
    else {
      nav.removeClass('header-bg-color');
    }
  };

  let scrollCollect = () => {
    return bamboo.throttle(function (e) {
      setHeaderClass();
    }, 200)()
  }

  let initHeaderBg = () => {
    setHeaderClass();
  }

  setHeaderClass();
  window.addEventListener('scroll', scrollCollect);

  document.addEventListener('pjax:send', function () {
    window.removeEventListener('scroll', scrollCollect)
  })
  document.addEventListener('pjax:complete', function () {
    window.addEventListener('scroll', scrollCollect);
    setHeaderClass();
  })
</script> 

<!-- 渲染issues标签里的内容 -->
<script>
  function loadIssuesJS() {
    if ($(".post-detail").find(".issues-api").length == 0) {
      return;
    } 
    loadScript('/js/issues/index.js');
  };
  $(function () {
    loadIssuesJS();
  });
  document.addEventListener('pjax:complete', function () {
    if (typeof IssuesAPI == "undefined") {
      loadIssuesJS();
    }
  })
</script>

<!-- 输入框打字特效 -->
<!-- 输入框打字特效 -->

  <script src="/js/activate-power-mode.js"></script>
  <script>
    POWERMODE.colorful = true;  // 打开随机颜色特效
    POWERMODE.shake = false;    // 关闭输入框抖动
    document.body.addEventListener('input', POWERMODE);//监听打字事件
  </script>


<!-- markdown代码一键复制功能 -->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/v-plugs-ayu/lib/ayu.css">
  <script src="https://cdn.jsdelivr.net/npm/v-plugs-ayu/lib/ayu.umd.min.js"></script>
  <script src="/js/clipboard/clipboard.min.js"></script>
  <div id="appCopy">
  </div>
  <script data-pjax>
    var vm = new Vue({
      el: '#appCopy',
      data: {
      },
      computed: {
      },
      mounted() {
        const that = this;
        var copy = '复制';
        /* code */
        var initCopyCode = function () {
          var copyHtml = '';
          copyHtml += '<button class="btn-copy" data-clipboard-snippet="" style="position:absolute;top:0;right:0;z-index:1;">';
          copyHtml += '<i class="fas fa-copy"></i><span>' + copy + '</span>';
          copyHtml += '</button>';
          $(".post-detail pre").not('.gutter pre').wrap("<div class='codeBox' style='position:relative;width:100%;'></div>")
          $(".post-detail pre").not('.gutter pre').before(copyHtml);
          new ClipboardJS('.btn-copy', {
            target: function (trigger) {
              return trigger.nextElementSibling;
            }
          });
        }
        initCopyCode();
        $('.btn-copy').unbind('click').bind('click', function () {
          doSomething();
        })
        $(document).unbind('keypress').bind('keypress', function (e) {
          if (e.ctrlKey && e.keyCode == 67) {
            doSomething();
          }
        })

        function doSomething() {
          that.$notify({
            title: "成功",
            content: "代码已复制，请遵守相关授权协议。",
            type: 'success'
          })
        }
      },
      methods: {
      },
      created() { }
    })
  </script>
  

<!-- 图片懒加载 -->
<script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 0
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    lazyLoadInstance.update();
  });
  document.addEventListener('pjax:complete', function () {
    lazyLoadInstance.update();
  });
</script>


<!-- 卡片滚动动画 -->
   

<!-- 评论所需js -->

  
    <script type="text/javascript">
  var utteranceCommon = {};

  function check_utterance() {
    let isDark = JSON.parse(localStorage.getItem('dark')) || JSON.parse('false');
    if (isDark) {
      utteranceCommon.Theme = 'github-dark';
    } else {
      utteranceCommon.Theme = 'github-light';
    }

    return document.getElementById("gitment-container");
  }
  comment_el = '#gitment-container';
  load_utterance = function () {
    if ($(comment_el).length) {
      // 匿名函数，防止污染全局变量
      const HEAD = check_utterance();

      var utterances = document.createElement('script');
      utterances.type = 'text/javascript';
      utterances.async = true;
      utterances.setAttribute('issue-term', 'pathname')
      utterances.setAttribute('theme', utteranceCommon.Theme)
      utterances.setAttribute('repo', '')
      utterances.crossorigin = 'anonymous';
      utterances.src = 'https://utteranc.es/client.js';
      // content 是要插入评论的地方
      document.getElementById('gitment-container').appendChild(utterances);

    }
  }

  function dark_utterance() {
    const HEAD = check_utterance();
    if (!HEAD) return;
    const message = {
      type: 'set-theme',
      theme: utteranceCommon.Theme
    };
    const utteranceIframe = document.querySelector('iframe');
    utteranceIframe.contentWindow.postMessage(message, 'https://utteranc.es');
  }

  $(document).ready(load_utterance);
  document.addEventListener('pjax:complete', function () {
    load_utterance();
  });

  $('.dark').click(function () {
    setTimeout(() => {
      dark_utterance();
    });
  })

</script>

<style>
  .utterances {
    max-width: inherit !important;
  }
</style>
  


<!-- 鼠标点击特效 -->
<!-- 爱心点击 -->

  
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 999; pointer-events: none;" ></canvas>
    <script src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script src="/js/cursor/explosion.min.js"></script>
  




  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" data-pjax></script>


    <!-- pjax -->
    

<!-- pjax -->


  <script src="/js/pjax@0.2.8/index.js"></script>
  
    <!-- 样式位于：source/css/_third-party/pjaxanimate.styl -->

<div class="pjax-animate">
  
    <div class="loading-circle"><div id="loader-circle"></div></div>
    <script>
      window.ShowLoading = function() {
        $(".loading-circle").css("display", "block");
      };
      window.HideLoading = function() {
        $(".loading-circle").css("display", "none");
      }
    </script>
  
	<script>
    document.addEventListener('pjax:complete', function () {
      window.HideLoading();
    })
    document.addEventListener('pjax:send', function () {
      window.ShowLoading();
    })
    document.addEventListener('pjax:error', function () {
      window.HideLoading();
    })
	</script>
</div>

  

  <script>
    var pjax = new Pjax({
      elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([no-pjax])',   // 拦截正常带链接的 a 标签
      selectors: ["#pjax-container","title"],                                   // 根据实际需要确认重载区域
      cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
      timeout: 5000
    });

    document.addEventListener('pjax:send', function (e) {

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = [""];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      $(window).unbind('resize');
      $(window).unbind('scroll');
      $(document).unbind('scroll');
      $(document).unbind('click');
      $('body').unbind('click');

    })
    
    document.addEventListener('pjax:complete', function () {
      $('script[data-pjax], .pjax-reload script').each(function () {
        $(this).parent().append($(this).remove());
      });
    });

    document.addEventListener('pjax:error', function (e) {
      window.location.href = e.triggerElement.href;
    })
    
    // 刷新不从顶部开始
    document.addEventListener("DOMContentLoaded", function () {
      history.scrollRestoration = 'auto';
    })
  </script>



  </body>
</html>